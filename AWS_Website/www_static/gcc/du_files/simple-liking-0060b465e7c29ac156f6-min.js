webpackJsonp([21],{0:function(k,f,a){a(3439);a(1168);a(532);a(602);a(604);a(1162);a(1176);a(1163);a(1164);a(1166);a(603);a(1157);a(1165);a(1167);a(1161);a(1025);a(928);a(1024);a(1023);a(1169);a(1170);a(1171);a(1172);a(1174);a(1175);a(1177)},12:function(k,f,a){k=a(17)["default"];f["default"]=k||function(a){for(var d=1;d<arguments.length;d++){var e=arguments[d],c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}return a};f.__esModule=!0},23:function(k,f,a){k.exports={"default":a(301),
__esModule:!0}},41:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);a=function(){function a(){d(this,a)}g(a,[{key:"bootstrap",value:function(a){this.dispatch(a)}}]);return a}();f=f.createActions(a);window.StaticActions=f;k.exports=f},46:function(k,f,a){f=a(221);a=a(226)(f);k.exports=a},47:function(k,f,a){Object.defineProperty(f,"__esModule",{value:!0});var g=(a=a(21))&&a.__esModule?a:{"default":a};f["default"]=function(a){a.config={setState:function(a,c){return this.state=c},getState:function(a){return a},
onSerialize:function(a){return a.toJS()},onDeserialize:function(a){return g["default"].fromJS(a)}};return a};k.exports=f["default"]},52:function(k,f){var a=Math.max;k.exports=function(g,d){if("function"!=typeof g)throw new TypeError("Expected a function");d=a(void 0===d?g.length-1:+d||0,0);return function(){for(var e=arguments,c=-1,b=a(e.length-d,0),h=Array(b);++c<b;)h[c]=e[d+c];switch(d){case 0:return g.call(this,h);case 1:return g.call(this,e[0],h);case 2:return g.call(this,e[0],e[1],h)}b=Array(d+
1);for(c=-1;++c<d;)b[c]=e[c];b[d]=h;return g.apply(this,b)}}},63:function(k,f,a){function g(a,m,r,q){q||(q=[]);for(var f=-1,n=a.length;++f<n;){var k=a[f];h(k)&&b(k)&&(r||c(k)||e(k))?m?g(k,m,r,q):d(q,k):r||(q[q.length]=k)}return q}var d=a(334),e=a(153),c=a(24),b=a(58),h=a(76);k.exports=g},78:function(k,f,a){var g=a(63),d=a(101),e=a(235),c=a(236);f=a(52)(function(a,h){return null==a?{}:"function"==typeof h[0]?c(a,d(h[0],h[1],3)):e(a,g(h))});k.exports=f},79:function(k,f,a){var g=a(453)["default"];f["default"]=
function(a,e,c){var b=!0;for(;b;)if(null===a&&(a=Function.prototype),b=g(a,e),void 0===b){a=Object.getPrototypeOf(a);if(null===a)break;b=!0}else{if("value"in b)return b.value;e=b.get;return void 0===e?void 0:e.call(c)}};f.__esModule=!0},80:function(k,f,a){var g=a(259)["default"],d=a(454)["default"];f["default"]=function(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=g(c&&c.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});c&&(d?d(a,c):a.__proto__=c)};f.__esModule=!0},95:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);var e=a(47),c=a(41),b=a(325),h=a(545);a=function(){function a(){d(this,a);this.state=new h;this.bindActions(b);this.bindListeners({onStaticBootstrap:c.BOOTSTRAP});this.exportPublicMethods({save:this.save})}g(a,[{key:"onStaticBootstrap",value:function(a){this.setState(new h(a.websiteSettings))}},{key:"onUpdate",value:function(a){this.setState(this.state.merge(a))}},
{key:"save",value:function(a){a=this.getState().mergeDeep(a).toJS();return b.save(a)}}]);return a}();k.exports=f.createStore(e(a),"WebsiteSettingsStore")},100:function(k,f,a){var g=a(6)["default"],d=a(4)["default"],e=a(17)["default"],c=a(23)["default"],b=a(176);f=a(8);var h=a(769),l=a(41),m=a(285),r=a(164),q=a(573);a=a(1071);var s=a.DEFAULT_COLLECTION_CONFIGURATIONS,n=a.DEFAULT_COLLECTION_CONFIGURATION,u=a.DEFAULT_TEMPLATE_PAGE_CONFIGURATION;a=function(){function a(){d(this,a);this.bindListeners({handleLoadTemplate:m.LOAD_TEMPLATE,
staticInitialized:l.BOOTSTRAP});this.exportPublicMethods({isTemplateOwner:this.isTemplateOwner,getCollectionConfig:this.getCollectionConfig,getCustomType:this.getCustomType,getPageConfig:this.getPageConfig})}g(a,[{key:"getCollectionConfig",value:function(a){return this.getState().collectionConfigs[a]}},{key:"getCustomType",value:function(a){return this.getState().customTypes[a]}},{key:"getPageConfig",value:function(a){return this.getState().pageConfigs[a]}},{key:"isTemplateOwner",value:function(){var a=
this.getState();return a.ownerWebsiteId===a.websiteId}},{key:"staticInitialized",value:function(a){this.setTemplateData(a.template);this.demoCollections=this.processDemoCollections(a.demoCollections);this.websiteId=a.website.id}},{key:"handleLoadTemplate",value:function(a){this.waitFor(h.dispatchToken);a.error?this.error=a.response:(this.error=null,this.setTemplateData(a.template),this.demoCollections=this.processDemoCollections(a.demoCollections))}},{key:"setTemplateData",value:function(a){a&&(this.id=
a.id,this.name=a.name,this.updatedOn=a.updatedOn,this.ownerWebsiteId=a.ownerWebsiteId,this.collectionConfigs=this.processCollectionConfigs(a.collectionConfigs),this.pageConfigs=this.processPageConfigs(a.pageConfigs),this.customTypes=this.processCustomTypes(a.customTypes),this.layouts=this.processLayouts(a.layouts),this.navigations=a.navigations)}},{key:"processCollectionConfigs",value:function(a){a.products&&(a.products=e({},s.products,a.products),a.products.acceptTypes&&0===a.products.acceptTypes.length&&
(a.products.acceptTypes=s.products.acceptTypes),a.products.ordering=r.USER);a.page&&(a.page=e({},s.page,a.page));a=e({},s,a);a=b(a,function(a){a=e({},n,a);!0===a.index?a.folderBehavior=q.INDEX:!0===a.folder&&(a.folderBehavior=q.NONE);return a});var h=a.folders||a.folder;h&&(h.acceptTypes=this.calculateFolderAcceptTypes(a));return a}},{key:"calculateFolderAcceptTypes",value:function(a){var h=["subscription","gallery-block","template-page"];return c(a).filter(function(c){return a[c].folder?!1:-1===
h.indexOf(c)}).concat(["link"])}},{key:"processPageConfigs",value:function(a){return b(a,function(a){return e({},u,a)})}},{key:"processCustomTypes",value:function(){return(0>=arguments.length||void 0===arguments[0]?[]:arguments[0]).reduce(function(a,h){a[h.name]=h;return a},{})}},{key:"processDemoCollections",value:function(a){return a||[]}},{key:"processLayouts",value:function(a){return a||{}}}]);return a}();k.exports=f.createStore(a,"TemplateStore")},135:function(k,f,a){var g=a(98),d=a(50),e=a(312);
k.exports=function(a,b){var h=(d.Object||{})[a]||Object[a],l={};l[a]=b(h);g(g.S+g.F*e(function(){h(1)}),"Object",l)}},140:function(k,f,a){var g=a(764),d=a(34),e=a(529),c=a(24),b=a(35);k.exports=function(a,l,m){var r=c(a)?g:e;m&&b(a,l,m)&&(l=void 0);if("function"!=typeof l||void 0!==m)l=d(l,m,3);return r(a,l)}},146:function(k,f,a){var g=a(6)["default"],d=a(4)["default"],e=a(26)["default"];f=a(8);var c=a(412);a=function(){function a(){d(this,a);this.generateActions("insert")}g(a,[{key:"read",value:function(a,
b,m){var d=this;void 0===b&&(b=!1);this.dispatch(a);return c.read(a,b,m).then(function(a){return d.actions.insert(a.data)})["catch"](function(a){a=a.data;return e.reject(a.message||a)})}},{key:"readForCollection",value:function(a){var b=this;this.dispatch(a);return c.readForCollection(a).then(function(a){(a=a.data)&&a.results.forEach(function(a){return b.actions.insert(a)});return e.resolve(a)})["catch"](function(a){a=a.data;return e.reject(a.message||a)})}},{key:"update",value:function(a,b){var m=
this;this.dispatch(a.id);return a.field?c.updateField(a).then(function(a){return m.actions.insert(a.data.item)})["catch"](function(a){a=a.data;return e.reject(a.message||a)}):c.update(a,b).then(function(a){a=a.data;m.actions.insert(a);return a})["catch"](function(a){a=a.data;return e.reject(a.message||a)})}},{key:"updateForCollection",value:function(a,b){var m=this;return c.updateForCollection(a,b).then(function(a){return m.actions.insert(a.data)})["catch"](function(a){a=a.data;return e.reject(a.message||
a)})}},{key:"create",value:function(a,b,m){var d=this;return c.create(a,b,m).then(function(a){a=a.data;d.actions.insert(a);return a})["catch"](function(a){a=a.data;return e.reject(a.message||a)})}},{key:"createForCollection",value:function(a,b,m){var d=this;return c.createForCollection(a,b,m).then(function(a){a=a.data;d.actions.insert(a);return a})["catch"](function(a){a=a.data;return e.reject(a.message||a)})}},{key:"delete",value:function(a,b){this.dispatch(a);return c["delete"](a,b)["catch"](function(a){a=
a.data;return e.reject(a.message||a)})}},{key:"deleteMany",value:function(a){this.dispatch(a);return c.deleteMany(a)}}]);return a}();k.exports=f.createActions(a)},149:function(k,f,a){var g=a(6)["default"],d=a(4)["default"],e=a(26)["default"];f=a(21);var c=f.Map,b=f.fromJS;f=a(8);var h=a(146);a=a(47);var l=function(){function a(){d(this,a);this.state=c();this.bindActions(h);this.exportPublicMethods({fetch:this.fetch,fetchForCollection:this.fetchForCollection,getForCollection:this.getForCollection})}
g(a,[{key:"onInsert",value:function(a){this.setState(this.state.set(a.id,b(a)))}},{key:"onDelete",value:function(a){this.setState(this.state["delete"](a))}},{key:"onDeleteMany",value:function(a){this.setState(this.state.filter(function(h,c){return-1===a.indexOf(c)}))}},{key:"fetch",value:function(a,c,b){var m=this;void 0===c&&(c=!1);if(!a)return e.resolve();var d=this.getState().get(a);return d?e.resolve(d):h.read(a,c,b).then(function(){return m.getState().get(a)})}},{key:"fetchForCollection",value:function(a){var c=
this,b=this.getForCollection(a);return 0<b.size?e.resolve(b):h.readForCollection(a).then(function(){return c.getForCollection(a)})}},{key:"getForCollection",value:function(a){return this.getState().filter(function(c){return c.get("collectionId")===a})}}]);return a}();k.exports=f.createStore(a(l),"ContentItemStore")},163:function(k,f){k.exports={AUTHENTICATED:0,CONFIG:1,ADMIN:2,CONFIG_CONTENT_MANAGER:11,CONFIG_SETTINGS:12,CONFIG_ACTIVITY:13,CONFIG_COMMERCE:14,CONFIG_NEWSLETTER:15,CONFIG_DAMASK:17,
CONFIG_CHANGE_STRUCTURE:1110,CONFIG_TRUSTED_COMMENTER:1111,CONFIG_SETTINGS_GENERAL:1210,CONFIG_SETTINGS_LOCALE:1211,CONFIG_SETTINGS_SOCIAL_ACCOUNT:1212,CONFIG_SETTINGS_FACEBOOK:1213,CONFIG_SETTINGS_SOCIAL_SETTINGS:1214,CONFIG_SETTINGS_MEMBER_ACCOUNTS:1215,CONFIG_SETTINGS_DOMAIN:1216,CONFIG_SETTINGS_TEMPLATE:1217,CONFIG_SETTINGS_IMPORT:1218,CONFIG_SETTINGS_CODEINJECT:1219,CONFIG_SETTINGS_ADVANCED:1220,CONFIG_SETTINGS_DEVELOPER:1221,CONFIG_SETTINGS_SESSIONS:1222,CONFIG_SETTINGS_MOBILE:1223,CONFIG_SETTINGS_BILLING:1224,
CONFIG_SETTINGS_SUPPORT:1225,CONFIG_SETTINGS_SITE:1226,CONFIG_SETTINGS_LABS:1227,CONFIG_SETTINGS_ADVERTISING:1228,CONFIG_ACTIVITY_STATS:1310,CONFIG_ACTIVITY_COMMENTS:1311,CONFIG_COMMERCE_ORDERS:1410,CONFIG_COMMERCE_STORE_SETTINGS:1411,CONFIG_COMMERCE_SHIPPING:1412,CONFIG_COMMERCE_COUPONS:1413,CONFIG_COMMERCE_TAXES:1414,CONFIG_COMMERCE_EMAIL_NOTIFICATIONS:1415,CONFIG_COMMERCE_INVENTORY:1416,CONFIG_COMMERCE_DONATIONS:1417,CONFIG_COMMERCE_ACCOUNTING:1418,CONFIG_COMMERCE_DISCOUNTS:1419,CONFIG_NEWSLETTER_READ_SUBSCRIBER:1510,
CONFIG_NEWSLETTER_WRITE_SUBSCRIBER:1511,CONFIG_NEWSLETTER_READ_GROUP:1512,CONFIG_NEWSLETTER_WRITE_GROUP:1513,CONFIG_NEWSLETTER_READ_MESSAGE:1514,CONFIG_NEWSLETTER_WRITE_MESSAGE:1515,CONFIG_NEWSLETTER_READ_SETTINGS:1516,CONFIG_NEWSLETTER_WRITE_SETTINGS:1517,CONFIG_ACCEPT_TOS:1610,CONFIG_DOMAINS_REMOVE:1611,CONFIG_DOMAINS_ADD:1612,ADMIN_GRANT_ACCESS:2010,ADMIN_BILLING_READ:2011,ADMIN_BILLING_WRITE:2012,ADMIN_READ_CUSTOMER_DATA:2013,ADMIN_WRITE_CUSTOMER_DATA:2014,ADMIN_DEV_SETTINGS:2015,ADMIN_MARKETING_READ:2016,
ADMIN_MARKETING_WRITE:2017,ADMIN_LOGINAS:2018,ADMIN_TEMPLATE_SETTINGS:2019,ADMIN_SYSTEM_JSON_VIEW:2020,ADMIN_TAXONOMY:2021,ADMIN_CHANGE_USER_EMAIL:2022,ADMIN_ADD_NOTE:2023,ADMIN_EDIT_OTHER_NOTES:2024,ADMIN_EXTEND_TRIAL:2025,ADMIN_BIZPIPE_STATS_MOBILE_ACCESS:2026,ADMIN_REFERRALS:2027,ADMIN_BILLING_REFUND:2028,ADMIN_BILLING_APPLY_EDU_DISCOUNT:2029,ADMIN_DEACTIVATE_SQUARESPACE_ACCOUNT:2030,ADMIN_BILLING_EXPIRE:2031,ADMIN_CHANGE_MAX_COMPS:2032,ADMIN_CHANGE_GUILDS:2033,ADMIN_DOMAIN_WRITE:2034,ADMIN_GOOGLE_APPS_WRITE:2035,
ADMIN_ADD_CONTRIBUTER:2036,ADMIN_CHANGE_WEBSITE_OWNER:2037,ADMIN_REMOVE_CONTRIBUTER:2038,ADMIN_TAXATION_READ:2039,ADMIN_SUSPEND:2040,ADMIN_TAXATION_WRITE:2041,ADMIN_LOGINAS_PUBLIC:2042,ADMIN_MASS_REMOVAL:2043,ADMIN_REMOVE_SITE:2044}},166:function(k,f,a){function g(a){return{url:F[a.action].replace("{collectionId}",a.collectionId),isFallback:!0}}function d(a){return{url:G[a.collectionType][a.action].replace("{collectionId}",a.collectionId).replace("{parentId}",a.parentId),isFallback:!1}}function e(){var a=
0>=arguments.length||void 0===arguments[0]?{}:arguments[0];if(!a.collectionId)return{url:H[a.action],isFallback:!0};if(a.parentId)return a.collectionType===w.PRODUCTS?d(a):g(a);var c=I[a.collectionOrdering];if(!c)return g(a);c=c[a.recordType];return!c?g(a):{url:c[a.action].replace("{collectionId}",a.collectionId),isFallback:!1}}var c=a(12)["default"],b,h,l,m,r,q,s,n,u,t,A,C,B,D,z,x,y,p=a(173),v=a(97);f=a(164);var w=a(33),I=(u={},u[f.CHRONOLOGICAL]=(m={},m[v.TEXT]=(b={},b[p.GET]="/api/content/blogs/{collectionId}/text-posts/{id}",
b[p.POST]="/api/content/blogs/{collectionId}/text-posts",b[p.PUT]="/api/content/blogs/{collectionId}/text-posts/{id}",b[p.DELETE]="/api/content/blogs/{collectionId}/text-posts/{id}",b),m[v.IMAGE]=(h={},h[p.GET]="/api/content/blogs/{collectionId}/image-posts/{id}",h[p.POST]="/api/content/blogs/{collectionId}/image-posts",h[p.PUT]="/api/content/blogs/{collectionId}/image-posts/{id}",h[p.DELETE]="/api/content/blogs/{collectionId}/image-posts/{id}",h),m[v.VIDEO]=(l={},l[p.GET]="/api/content/blogs/{collectionId}/video-posts/{id}",
l[p.POST]="/api/content/blogs/{collectionId}/video-posts",l[p.PUT]="/api/content/blogs/{collectionId}/video-posts/{id}",l[p.DELETE]="/api/content/blogs/{collectionId}/video-posts/{id}",l),m),u[f.CALENDAR]=(q={},q[v.EVENT]=(r={},r[p.GET]="/api/content/calendars/{collectionId}/events/{id}",r[p.POST]="/api/content/calendars/{collectionId}/events",r[p.PUT]="/api/content/calendars/{collectionId}/events/{id}",r[p.DELETE]="/api/content/calendars/{collectionId}/events/{id}",r),q),u[f.USER]=(n={},n[v.STORE_ITEM]=
(s={},s[p.GET]="/api/content/product-pages/{collectionId}/products/{id}",s[p.POST]="/api/content/product-pages/{collectionId}/products",s[p.PUT]="/api/content/product-pages/{collectionId}/products/{id}",s[p.DELETE]="/api/content/product-pages/{collectionId}/products/{id}",s),n),u),G=(A={},A[w.PRODUCTS]=(t={},t[p.GET]="/api/content/product-pages/{collectionId}/products/{parentId}/images/{id}",t[p.POST]="/api/content/product-pages/{collectionId}/products/{parentId}/images",t[p.PUT]="/api/content/product-pages/{collectionId}/products/{parentId}/images/{id}",
t[p.DELETE]="/api/content/product-pages/{collectionId}/products/{parentId}/images/{id}",t),A),E=(z={},z[f.CHRONOLOGICAL]=(C={},C[w.COLLECTION_TYPE_GENERIC]="/api/content/blogs/{collectionId}/posts",C),z[f.CALENDAR]=(B={},B[w.COLLECTION_TYPE_GENERIC]="/api/content/calendars/{collectionId}/events",B),z[f.USER]=(D={},D[w.PRODUCTS]="/api/content/product-pages/{collectionId}/products",D),z),F=(x={},x[p.GET]="/api/content-collections/{collectionId}/content-items/{id}",x[p.POST]="/api/content-collections/{collectionId}/content-items",
x[p.PUT]="/api/content-collections/{collectionId}/content-items/{id}",x[p.DELETE]="/api/content-collections/{collectionId}/content-items/{id}",x),H=(y={},y[p.GET]="/api/content-items/{id}",y[p.POST]="/api/content-items",y[p.PUT]="/api/content-items/{id}",y[p.DELETE]="/api/content-items/{id}",y);k.exports={getTemplateForSingleItem:function(){return e(0>=arguments.length||void 0===arguments[0]?{}:arguments[0]).url},getTemplateForCollectionItems:function(a,c){if(!a)return"/api/content-collections/{collectionId}/content-items";
var h=void 0;E.hasOwnProperty(a)&&(h=E[a][c]);return!h?"/api/content-collections/{collectionId}/content-items":h},getMainImageUploadUrl:function(){var a=e(c({},0>=arguments.length||void 0===arguments[0]?{}:arguments[0],{action:p.DELETE}));return a.isFallback?"/api/commondata/SaveMedia":a.url+"/main-image"},getMainImageDeletionUrl:function(){var a=e(c({},0>=arguments.length||void 0===arguments[0]?{}:arguments[0],{action:p.DELETE}));return a.isFallback?"/api/commondata/ClearEmbeddedAsset":a.url+"/main-image"},
getChildImageUploadUrl:function(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];return a.recordType===v.STORE_ITEM?d({collectionType:w.PRODUCTS,recordType:v.STORE_ITEM,action:p.POST,parentId:a.parentId,collectionId:a.collectionId}).url:"/api/commondata/SaveMedia"}}},173:function(k,f){k.exports={GET:1,POST:2,PUT:3,DELETE:4}},174:function(k,f,a){var g=a(527),d=a(34),e=a(528),c=a(24),b=a(35);k.exports=function(a,l,m){var r=c(a)?g:e;m&&b(a,l,m)&&(l=void 0);if("function"!=typeof l||
void 0!==m)l=d(l,m,3);return r(a,l)}},226:function(k,f,a){var g=a(147),d=a(92),e=a(132);k.exports=function(a,b){return function(h,l){var m=h?g(h):0;if(!d(m))return a(h,l);for(var r=b?m:-1,q=e(h);(b?r--:++r<m)&&!1!==l(q[r],r,q););return h}}},235:function(k,f,a){var g=a(132);k.exports=function(a,e){a=g(a);for(var c=-1,b=e.length,h={};++c<b;){var l=e[c];l in a&&(h[l]=a[l])}return h}},236:function(k,f,a){var g=a(270);k.exports=function(a,e){var c={};g(a,function(a,h,d){e(a,h,d)&&(c[h]=a)});return c}},
237:function(k,f,a){var g=a(76),d=Object.prototype.toString;k.exports=function(a){return"number"==typeof a||g(a)&&"[object Number]"==d.call(a)}},259:function(k,f,a){k.exports={"default":a(331),__esModule:!0}},270:function(k,f,a){var g=a(595),d=a(127);k.exports=function(a,c){return g(a,c,d)}},281:function(k,f,a){var g=a(6)["default"],d=a(4)["default"],e=a(21).Set,c=a(174),b=a(140);f=a(8);var h=a(47),l=a(163),m=a(41),r=a(24),q=a(237),s=function(a){return r(a)&&a.every(function(a){return q(a)})};a=function(){function a(){d(this,
a);this.state=e();this.bindListeners({onStaticBootstrap:m.BOOTSTRAP});this.exportPublicMethods({hasPermission:this.hasPermission,hasAllPermissions:this.hasAllPermissions,hasAnyPermission:this.hasAnyPermission,isAdmin:this.isAdmin})}g(a,[{key:"onStaticBootstrap",value:function(a){a=a.accessPermissions;return s(a)?(this.setState(e(a)),!0):!1}},{key:"hasPermission",value:function(a){var c=this.getState(),h="string"===typeof a?l[a]:a;if(void 0===h)throw Error(a?"Permission '"+a+"' not found.":"Permission is undefined.");
return c.has(h)}},{key:"hasAllPermissions",value:function(a){return c(a,this.hasPermission,this)}},{key:"hasAnyPermission",value:function(a){return b(a,this.hasPermission,this)}},{key:"isAdmin",value:function(){return this.hasPermission(l.ADMIN)}}]);return a}();k.exports=f.createStore(h(a),"AccessPermissionStore")},285:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);var e=a(982);a=function(){function a(){d(this,a)}g(a,[{key:"loadTemplate",value:function(a){var c=this;e.getTemplate(a).then(function(a){c.dispatch(a.data)},
function(a){c.dispatch({error:!0,response:a})})}}]);return a}();k.exports=f.createActions(a)},287:function(k,f,a){var g=a(23)["default"];k.exports=function(a){var e={};g(a).map(function(c){var b=a[c];"object"===typeof b?e[c]=JSON.stringify(b):void 0!==b&&(e[c]=b)});return e}},294:function(k,f,a){var g=a(6)["default"],d=a(4)["default"],e=a(17)["default"],c=a(929),b=a(983);f=a(8);var h=a(605),l=a(285);a=function(){function a(){d(this,a)}g(a,[{key:"loadAll",value:function(){var a=this;this.dispatch();
return b.loadTemplateInstallations().then(function(c){a.actions.loadSuccess(c.data)},function(c){a.actions.loadFailure(c.error)})}},{key:"setPreviewInstallation",value:function(a,b,m){var n=this,d=e({},a,{previewInstallationId:b});c.save(a.id,d).then(function(a){l.loadTemplate.defer(m);n.dispatch(b);setTimeout(function(){return h.setUrl("/")},1E3)},function(a){})}},{key:"setLiveInstallation",value:function(a,c){var m=this;b.setLiveInstallation(a).then(function(b){l.loadTemplate.defer(c);m.dispatch(a);
setTimeout(h.refresh,1E3)},function(a){})}},{key:"setHomepageCollectionId",value:function(a){var c=this;return b.setHomepageCollectionId(a).then(function(h){h={homepageCollectionId:a};c.dispatch(h);return h},function(h){h={homepageCollectionId:a,error:!0};c.dispatch(h);return h})}},{key:"updateInstallation",value:function(a){return b.updateInstallation(a).then(this.actions.loadAll)}},{key:"loadSuccess",value:function(a){this.dispatch(a)}},{key:"loadFailure",value:function(a){this.dispatch(a)}}]);
return a}();k.exports=f.createActions(a)},298:function(k,f){k.exports={QUEUED:1,PROCESSING:2,READY:3,ERROR:4,DOWNLOAD_ERROR:5,ERROR_TOO_LARGE:6,ERROR_FILE_NOT_FOUND:7,ERROR_UNSUPPORTED_IMAGE_TYPE:8,ERROR_UNSUPPORTED_AUDIO_TYPE:9}},301:function(k,f,a){a(303);k.exports=a(50).Object.keys},303:function(k,f,a){var g=a(461);a(135)("keys",function(a){return function(e){return a(g(e))}})},325:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);var e=a(25);a=function(){function a(){d(this,a);this.generateActions("update")}
g(a,[{key:"save",value:function(a){var c=this;return e.put("/api/settings",a).then(function(a){return c.actions.update(a.data)})}}]);return a}();k.exports=f.createActions(a)},326:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);var e=a(41),c=a(294);a=function(){function a(){d(this,a);this.templateInstallations={};this.bindListeners({handleLoadSuccess:c.LOAD_SUCCESS,handleLoadFailure:c.LOAD_FAILURE,handleStaticInitialized:e.BOOTSTRAP,handlePreviewSet:c.SET_PREVIEW_INSTALLATION,handleTemplateSet:c.SET_LIVE_INSTALLATION,
handleHomepageCollectionIdSet:c.SET_HOMEPAGE_COLLECTION_ID});this.exportPublicMethods({getHomepageCollectionId:this.getHomepageCollectionId})}g(a,[{key:"getHomepageCollectionId",value:function(){return this.getState().activeInstallation?this.getState().activeInstallation.homepageCollectionId:this.getState().homepageCollectionId}},{key:"handleStaticInitialized",value:function(a){var c=a.authenticatedAccountWebsiteSettings;this.previewInstallationId=c?c.previewInstallationId:null;this.homepageCollectionId=
a.homepageCollectionId;a.templateInstallation?(this.liveInstallationId=a.templateInstallation.id,this.templateInstallations[this.liveInstallationId]=a.templateInstallation):this.liveInstallationId=null;this.updateInstallationReferences()}},{key:"updateInstallationReferences",value:function(){this.liveInstallation=this.getTemplateInstallation(this.liveInstallationId);this.previewInstallation=null;this.previewInstallationId!==this.liveInstallationId&&(this.previewInstallation=this.getTemplateInstallation(this.previewInstallationId));
this.activeInstallation=this.previewInstallation||this.liveInstallation}},{key:"getTemplateInstallation",value:function(a){return!a||!this.templateInstallations[a]?null:this.templateInstallations[a]}},{key:"handleHomepageCollectionIdSet",value:function(a){a.error||(this.homepageCollectionId=a.homepageCollectionId,this.activeInstallation&&(this.activeInstallation.homepageCollectionId=a.homepageCollectionId))}},{key:"handlePreviewSet",value:function(a){this.previewInstallationId=a;this.updateInstallationReferences()}},
{key:"handleTemplateSet",value:function(a){this.liveInstallationId=a;this.previewInstallationId=null;this.updateInstallationReferences()}},{key:"handleLoadSuccess",value:function(a){var c={};a.forEach(function(a){this[a.id]=a},c);this.maintainMissingInstallation(c,this.liveInstallationId);this.maintainMissingInstallation(c,this.previewInstallationId);this.templateInstallations=c;this.updateInstallationReferences()}},{key:"maintainMissingInstallation",value:function(a,c){c&&!a[c]&&(a[c]=this.templateInstallations[c])}},
{key:"handleLoadFailure",value:function(){console.error("Unable to load installations")}}]);return a}();k.exports=f.createStore(a,"TemplateInstallationsStore")},331:function(k,f,a){var g=a(77);k.exports=function(a,e){return g.create(a,e)}},334:function(k,f){k.exports=function(a,g){for(var d=-1,e=g.length,c=a.length;++d<e;)a[c+d]=g[d];return a}},412:function(k,f,a){function g(a){var c=2>=arguments.length||void 0===arguments[2]?"":arguments[2];return h.getTemplateForSingleItem(d({},1>=arguments.length||
void 0===arguments[1]?{}:arguments[1],{action:a})).replace("{id}",c)}var d=a(12)["default"],e=a(138),c=a(25),b=a(287),h=a(166),l=a(173);k.exports={read:function(a,h,b){void 0===h&&(h=!1);return h?c.get("/api/rest/global-content-items/"+a):c.get(g(l.GET,b,a))},readForCollection:function(a,b){var d=h.getTemplateForCollectionItems(b).replace("{collectionId}",a);return c.get(d)},update:function(a,h){delete a.author;delete a.pendingPushedServices;delete a.pushedServices;return c.put(g(l.PUT,h,a.id),a)},
updateForCollection:function(a,h){delete a.author;delete a.pendingPushedServices;delete a.pushedServices;return c.put(g(l.PUT,h,a.id),a)},create:function(a,h,b){return c.post(g(l.POST,b),a,h)},createForCollection:function(a,h,b){return c.post(g(l.POST,b),a,h)},updateField:function(a){a=b(a);return c.post("/api/commondata/SaveItemField",e.stringify(a))},"delete":function(a,h){return c["delete"](g(l.DELETE,h,a))},deleteMany:function(a){a=e.stringify({items:a});return c.post("/api/commondata/RemoveItems",
a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}},453:function(k,f,a){k.exports={"default":a(455),__esModule:!0}},454:function(k,f,a){k.exports={"default":a(456),__esModule:!0}},455:function(k,f,a){var g=a(77);a(462);k.exports=function(a,e){return g.getDesc(a,e)}},456:function(k,f,a){a(463);k.exports=a(50).Object.setPrototypeOf},462:function(k,f,a){var g=a(460);a(135)("getOwnPropertyDescriptor",function(a){return function(e,c){return a(g(e),c)}})},463:function(k,f,a){k=a(98);k(k.S,
"Object",{setPrototypeOf:a(760).set})},527:function(k,f){k.exports=function(a,g){for(var d=-1,e=a.length;++d<e;)if(!g(a[d],d,a))return!1;return!0}},528:function(k,f,a){var g=a(46);k.exports=function(a,e){var c=!0;g(a,function(a,h,d){return c=!!e(a,h,d)});return c}},529:function(k,f,a){var g=a(46);k.exports=function(a,e){var c;g(a,function(a,h,d){c=e(a,h,d);return!c});return!!c}},532:function(k,f){YUI.add("model",function(a,g){function d(){d.superclass.constructor.apply(this,arguments)}var e=YUI.namespace("Env.Model"),
c=a.Lang,b=a.Array,h=a.Object,l="error";a.Model=a.extend(d,a.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(a){this.changed={};this.lastChange={};this.lists=[]},destroy:function(a,c){var h=this;"function"===typeof a&&(c=a,a=null);h.onceAfter("destroy",function(){function d(n){n||b.each(h.lists.concat(),function(c){c.remove(h,a)});c&&c.apply(null,arguments)}a&&(a.remove||a["delete"])?h.sync("delete",a,d):d()});return d.superclass.destroy.call(h)},generateClientId:function(){e.lastId||
(e.lastId=0);return this.constructor.NAME+"_"+(e.lastId+=1)},getAsHTML:function(h){h=this.get(h);return a.Escape.html(c.isValue(h)?String(h):"")},getAsURL:function(a){a=this.get(a);return encodeURIComponent(c.isValue(a)?String(a):"")},isModified:function(){return this.isNew()||!h.isEmpty(this.changed)},isNew:function(){return!c.isValue(this.get("id"))},load:function(a,c){var h=this;"function"===typeof a&&(c=a,a={});a||(a={});h.sync("read",a,function(b,n){var d={options:a,response:n},t;b?(d.error=
b,d.src="load",h.fire(l,d)):(h._loadEvent||(h._loadEvent=h.publish("load",{preventable:!1})),t=d.parsed=h._parse(n),h.setAttrs(t,a),h.changed={},h.fire("load",d));c&&c.apply(null,arguments)});return h},parse:function(c){if("string"===typeof c)try{return a.JSON.parse(c)}catch(h){return this.fire(l,{error:h,response:c,src:"parse"}),null}return c},save:function(a,c){var h=this;"function"===typeof a&&(c=a,a={});a||(a={});h._validate(h.toJSON(),function(b){b?c&&c.call(null,b):h.sync(h.isNew()?"create":
"update",a,function(b,d){var t={options:a,response:d},e;b?(t.error=b,t.src="save",h.fire(l,t)):(h._saveEvent||(h._saveEvent=h.publish("save",{preventable:!1})),d&&(e=t.parsed=h._parse(d),h.setAttrs(e,a)),h.changed={},h.fire("save",t));c&&c.apply(null,arguments)})});return h},set:function(a,c,h){var b={};b[a]=c;return this.setAttrs(b,h)},setAttrs:function(c,b){var d=this.idAttribute,e,n,l,t;b=a.merge(b);t=b._transaction={};"id"!==d&&(c=a.merge(c),h.owns(c,d)?c.id=c[d]:h.owns(c,"id")&&(c[d]=c.id));
for(n in c)h.owns(c,n)&&this._setAttr(n,c[n],b);if(!h.isEmpty(t)){d=this.changed;l=this.lastChange={};for(n in t)h.owns(t,n)&&(e=t[n],d[n]=e.newVal,l[n]={newVal:e.newVal,prevVal:e.prevVal,src:e.src||null});b.silent||(this._changeEvent||(this._changeEvent=this.publish("change",{preventable:!1})),b.changed=l,this.fire("change",b))}return this},sync:function(){var a=b(arguments,0,!0).pop();"function"===typeof a&&a()},toJSON:function(){var a=this.getAttrs();delete a.clientId;delete a.destroyed;delete a.initialized;
"id"!==this.idAttribute&&delete a.id;return a},undo:function(a,c){var d=this.lastChange,e=this.idAttribute,n={},l;a||(a=h.keys(d));b.each(a,function(a){h.owns(d,a)&&(a=a===e?"id":a,l=!0,n[a]=d[a].prevVal)});return l?this.setAttrs(n,c):this},validate:function(a,c){c&&c()},addAttr:function(a,h,b){var e=this.idAttribute,n;e&&a===e&&(e=this._isLazyAttr("id")||this._getAttrCfg("id"),n=h.value===h.defaultValue?null:h.value,c.isValue(n)||(n=e.value===e.defaultValue?null:e.value,c.isValue(n)||(n=c.isValue(h.defaultValue)?
h.defaultValue:e.defaultValue)),h.value=n,e.value!==n&&(e.value=n,this._isLazyAttr("id")?this._state.add("id","lazy",e):this._state.add("id","value",n)));return d.superclass.addAttr.apply(this,arguments)},_parse:function(a){return this.parse(a)},_validate:function(a,h){function b(n){c.isValue(n)?(d.fire(l,{attributes:a,error:n,src:"validate"}),h(n)):h()}var d=this;1===d.validate.length?b(d.validate(a,b)):d.validate(a,b)},_setAttrVal:function(a,c,h,b,n,e){var t=d.superclass._setAttrVal.apply(this,
arguments),l=n&&n._transaction,g=e&&e.initializing;t&&(l&&!g)&&(l[a]={newVal:this.get(a),prevVal:h,src:n.src||null});return t}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.17.2",{requires:["base-build","escape","json-parse"]})},534:function(k,f){k.exports={ENABLED:1,DISABLED:2}},536:function(k,f){function a(a){this.dispatcher=a.dispatcher;this.listeners={}}Object.defineProperty(f,"__esModule",{value:!0});a.prototype.addActionListener=function(a,d){var e=
this.dispatcher.register(function(c){a===c.action&&d(c.data,c.details)});this.listeners[e]=!0;return e};a.prototype.removeActionListener=function(a){delete this.listeners[a];this.dispatcher.unregister(a)};a.prototype.removeAllActionListeners=function(){Object.keys(this.listeners).forEach(this.removeActionListener.bind(this));this.listeners={}};f["default"]=a;k.exports=f["default"]},545:function(k,f,a){var g=a(79)["default"],d=a(80)["default"],e=a(6)["default"],c=a(4)["default"];f=a(23)["default"];
var b=a(21),h=b.Record,l=b.Set,m=b.Map,r=a(78),q=a(546);a={allowSquarespacePromotion:!0,amazonAssociateTag:void 0,announcementBarSettings:m(),assetPurchasesByNonAdminsAllowed:!0,businessHours:m(),collectionTitleFormat:void 0,commentAnonAllowed:void 0,commentApprovalRequired:void 0,commentAvatarsOn:void 0,commentDisableAfterDaysDefault:0,commentEnableByDefault:void 0,commentFlagThreshold:0,commentFlagsAllowed:void 0,commentLikesAllowed:void 0,commentSortType:void 0,commentThreaded:void 0,commentsEnabled:!0,
configurationMenuItems:void 0,contactEmail:void 0,contactPhoneNumber:void 0,country:void 0,defaultPostFormat:void 0,disqusShortname:"",homepageTitleFormat:void 0,hours:void 0,id:void 0,itemTitleFormat:void 0,lastAgreedTermsOfService:void 0,markdownMode:void 0,mobileInfoBarSettings:m(),notFoundPageId:null,ownerId:void 0,pinterestOverlayOptions:m(),simpleLikingEnabled:void 0,socialAccountDisplayOrder:void 0,ssBadgeDevices:void 0,ssBadgePosition:void 0,ssBadgeType:void 0,ssBadgeVisibility:void 0,state:void 0,
storeSettings:void 0,subjects:void 0,tutorialsCompleted:l(),type:void 0,contentDescription:m(),goals:m(),useDeviceView:!0,useEscapeKeyToLogin:!0,websiteId:void 0};var s=f(a);k.exports=function(a){function l(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];c(this,l);g(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,b.fromJS(q(a)))}d(l,a);e(l,[{key:"merge",value:function(a){a=a instanceof h?a:r(q(a),s);return g(Object.getPrototypeOf(l.prototype),"merge",this).call(this,
a)}},{key:"serializeToModel",value:function(){var a=this.toJS(),c=a.tutorialsCompleted;null===a.notFoundPageId&&(a.notFoundPageId="system-default");c&&(a.tutorialsCompleted=c.reduce(function(a,c){a[c]=!0;return a},{}));return a}}]);return l}(h(a))},546:function(k,f,a){var g=a(17)["default"],d=a(23)["default"],e=a(21).Set;k.exports=function(a){var b=a.notFoundPageId,h=a.tutorialsCompleted;a=g({},a);h&&(a.tutorialsCompleted=e(d(h)));"system-default"===b&&(a.notFoundPageId=null);return a}},587:function(k,
f,a){var g=a(6)["default"],d=a(4)["default"],e=a(26)["default"],c=a(770);f=a(8);a=function(){function a(){d(this,a);this.generateActions("insert","insertMany","deleteSuccess","deleteFailure")}g(a,[{key:"create",value:function(a){var b=this;this.dispatch(a);return c.create(a).then(function(a){a=a.data;b.actions.insert(a);return a.id})}},{key:"read",value:function(a){var b=this;this.dispatch(a);return c.read(a).then(function(a){return b.actions.insert(a.data)})}},{key:"readAll",value:function(){var a=
this;return c.readAll().then(function(c){return a.actions.insertMany(c.data)})["catch"](function(a){return e.reject(a.data.message)})}},{key:"delete",value:function(a){var b=this;this.dispatch(a);return c["delete"](a).then(function(c){b.actions.deleteSuccess(a);return c},function(c){c=c.data;b.actions.deleteFailure(a,c);return e.reject(c.message)})}},{key:"deleteUnusedCollectionPermanently",value:function(a){var b=this;this.dispatch(a);return c.deleteUnusedPageCollectionPermanently(a).then(function(c){b.actions.deleteSuccess(a);
return c},function(c){c=c.data;b.actions.deleteFailure(a,c);return e.reject(c.message)})}},{key:"update",value:function(a){var b=this;return a.id&&!a.urlId?c.generateUrl(a).then(function(d){a.urlId=d.data.urlId;return c.create(a).then(function(a){b.actions.insert(a.data);return a.data})})["catch"](function(a){return e.reject(a.data.message)}):c.create(a).then(function(a){a=a.data;b.actions.insert(a);return a})}}]);return a}();k.exports=f.createActions(a)},602:function(k,f){YUI.add("squarespace-model-sync-rest",
function(a){function g(){this._ioConfigCache={}}g.prototype={sync:function(d,e,c){a.Lang.isValue(e.timeout)||(e.timeout=1E7);a.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(d,e){this._ioConfigCache[d.id]=a.merge(e,{})},_retrieveAndEvict:function(a){var e=this._ioConfigCache[a];this._ioConfigCache[a]=null;return e},_isCrumbFailure:function(a){return a&&a.crumbFail&&a.crumb},_sendSyncIORequest:function(d){var e=a.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);
this._storeRequest(e,d);return e},_onSyncIOEnd:function(d,e){this._retrieveAndEvict(d);a.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(d,e,c){var b=this._retrieveAndEvict(d),h={},l=e.responseText;a.Lang.isValue(l)&&l.trim()&&(h=a.JSON.parse(l));this._isCrumbFailure(h)?(h=h.crumb,a.ModelSync.REST.CSRF_TOKEN=h,a.Env.CSRF_TOKEN=h,b.headers["X-CSRF-Token"]=h,this._sendSyncIORequest(b)):a.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(d,
e,c){if(d=c.callback){c={};var b=e.responseText;a.Lang.isValue(b)&&b.trim()&&(c=a.JSON.parse(b));d({code:e.status,msg:e.statusText,responseJSON:c},e)}}};a.mix(g,a.ModelSync.REST,!1,null,1);a.namespace("Squarespace.ModelSync").REST=g},"1.0",{requires:["model-sync-rest"]})},603:function(k,f){YUI.add("model-list",function(a,g){function d(){d.superclass.constructor.apply(this,arguments)}var e=a.Attribute.prototype,c=a.Lang,b=a.Array;a.ModelList=a.extend(d,a.Base,{model:a.Model,_isYUIModelList:!0,initializer:function(c){c||
(c={});var b=this.model=c.model||this.model;"string"===typeof b&&((this.model=a.Object.getValue(a,b.split(".")))||a.error("ModelList: Model class not found: "+b));this.publish("add",{defaultFn:this._defAddFn});this.publish("reset",{defaultFn:this._defResetFn});this.publish("remove",{defaultFn:this._defRemoveFn});this.after("*:idChange",this._afterIdChange);this._clear();c.items&&this.add(c.items,{silent:!0})},destructor:function(){this._clear()},add:function(h,d){var e=h._isYUIModelList;return e||
c.isArray(h)?b.map(e?h.toArray():h,function(c,h){var b=d||{};"index"in b&&(b=a.merge(b,{index:b.index+h}));return this._add(c,b)},this):this._add(h,d)},create:function(c,b,d){var e=this;"function"===typeof b&&(d=b,b={});b||(b={});c._isYUIModel||(c=new this.model(c));e.fire("create",a.merge(b,{model:c}));return c.save(b,function(a){a||e.add(c,b);d&&d.apply(null,arguments)})},each:function(a,c){var b=this._items.concat(),d,e,g;d=0;for(g=b.length;d<g;d++)e=b[d],a.call(c||e,e,d,this);return this},filter:function(a,
c){var b=[],d=this._items,e,g,n;"function"===typeof a&&(c=a,a={});e=0;for(n=d.length;e<n;++e)g=d[e],c.call(this,g,e,this)&&b.push(g);return a.asList?(d=new this.constructor({model:this.model}),b.length&&d.add(b,{silent:!0}),d):b},get:function(a){return this.attrAdded(a)?e.get.apply(this,arguments):this.invoke("get",a)},getAsHTML:function(c){return this.attrAdded(c)?a.Escape.html(e.get.apply(this,arguments)):this.invoke("getAsHTML",c)},getAsURL:function(a){return this.attrAdded(a)?encodeURIComponent(e.get.apply(this,
arguments)):this.invoke("getAsURL",a)},getByClientId:function(a){return this._clientIdMap[a]||null},getById:function(a){return this._idMap[a]||null},invoke:function(a){var c=[this._items,a].concat(b(arguments,1,!0));return b.invoke.apply(b,c)},load:function(a,c){var b=this;"function"===typeof a&&(c=a,a={});a||(a={});this.sync("read",a,function(d,e){var g={options:a,response:e},n;d?(g.error=d,g.src="load",b.fire("error",g)):(b._loadEvent||(b._loadEvent=b.publish("load",{preventable:!1})),n=g.parsed=
b._parse(e),b.reset(n,a),b.fire("load",g));c&&c.apply(null,arguments)});return this},map:function(a,c){return b.map(this._items,a,c)},parse:function(c){if("string"===typeof c)try{return a.JSON.parse(c)||[]}catch(b){return this.fire("error",{error:b,response:c,src:"parse"}),null}return c||[]},remove:function(a,d){var e=a._isYUIModelList;return e||c.isArray(a)?(a=b.map(e?a.toArray():a,function(a){return c.isNumber(a)?this.item(a):a},this),b.map(a,function(a){return this._remove(a,d)},this)):this._remove(a,
d)},reset:function(c,d){c||(c=[]);d||(d={});var e=a.merge({src:"reset"},d);c=c._isYUIModelList?c.toArray():b.map(c,function(a){return a._isYUIModel?a:new this.model(a)},this);e.models=c;d.silent?this._defResetFn(e):(this.comparator&&c.sort(a.bind(this._sort,this)),this.fire("reset",e));return this},some:function(a,c){var b=this._items.concat(),d,e,g;d=0;for(g=b.length;d<g;d++)if(e=b[d],a.call(c||e,e,d,this))return!0;return!1},sort:function(c){if(!this.comparator)return this;var b=this._items.concat();
c||(c={});b.sort(a.rbind(this._sort,this,c));b=a.merge(c,{models:b,src:"sort"});c.silent?this._defResetFn(b):this.fire("reset",b);return this},sync:function(){var a=b(arguments,0,!0).pop();"function"===typeof a&&a()},toArray:function(){return this._items.concat()},toJSON:function(){return this.map(function(a){return a.toJSON()})},_add:function(b,d){var e;d||(d={});b._isYUIModel||(b=new this.model(b));e=b.get("id");if(this._clientIdMap[b.get("clientId")]||c.isValue(e)&&this._idMap[e])this.fire("error",
{error:"Model is already in the list.",model:b,src:"add"});else return e=a.merge(d,{index:"index"in d?d.index:this._findIndex(b),model:b}),d.silent?this._defAddFn(e):this.fire("add",e),b},_attachList:function(a){a.lists.push(this);a.addTarget(this)},_clear:function(){b.each(this._items,this._detachList,this);this._clientIdMap={};this._idMap={};this._items=[]},_compare:function(a,c){return a<c?-1:a>c?1:0},_detachList:function(a){var c=b.indexOf(a.lists,this);-1<c&&(a.lists.splice(c,1),a.removeTarget(this))},
_findIndex:function(a){var c=this._items,b=c.length,d=0,e,g;if(!this.comparator||!b)return b;for(g=this.comparator(a);d<b;)e=d+b>>1,a=c[e],0>this._compare(this.comparator(a),g)?d=e+1:b=e;return d},_parse:function(a){return this.parse(a)},_remove:function(b,d){var e;d||(d={});c.isNumber(b)?(e=b,b=this.item(e)):e=this.indexOf(b);if(-1===e||!b)this.fire("error",{error:"Model is not in the list.",index:e,model:b,src:"remove"});else return e=a.merge(d,{index:e,model:b}),d.silent?this._defRemoveFn(e):this.fire("remove",
e),b},_sort:function(a,c,b){a=this._compare(this.comparator(a),this.comparator(c));return 0===a?a:b&&b.descending?-a:a},_afterIdChange:function(a){var b=a.newVal,d=a.prevVal;a=a.target;if(c.isValue(d))if(this._idMap[d]===a)delete this._idMap[d];else return;else if(-1===this.indexOf(a))return;c.isValue(b)&&(this._idMap[b]=a)},_defAddFn:function(a){var b=a.model,d=b.get("id");this._clientIdMap[b.get("clientId")]=b;c.isValue(d)&&(this._idMap[d]=b);this._attachList(b);this._items.splice(a.index,0,b)},
_defRemoveFn:function(a){var b=a.model,d=b.get("id");this._detachList(b);delete this._clientIdMap[b.get("clientId")];c.isValue(d)&&delete this._idMap[d];this._items.splice(a.index,1)},_defResetFn:function(a){"sort"===a.src?this._items=a.models.concat():(this._clear(),a.models.length&&this.add(a.models,{silent:!0}))}},{NAME:"modelList"});a.augment(d,a.ArrayList)},"3.17.2",{requires:"array-extras array-invoke arraylist base-build escape json-parse model".split(" ")})},604:function(k,f){YUI.add("model-sync-rest",
function(a,g){function d(){}var e=a.Lang;d.CSRF_TOKEN=YUI.Env.CSRF_TOKEN;d.EMULATE_HTTP=!1;d.HTTP_HEADERS={Accept:"application/json","Content-Type":"application/json"};d.HTTP_METHODS={create:"POST",read:"GET",update:"PUT","delete":"DELETE"};d.HTTP_TIMEOUT=3E4;d._NON_ATTRS_CFG=["root","url"];d.prototype={root:"",url:"",initializer:function(a){a||(a={});"root"in a&&(this.root=a.root||"");"url"in a&&(this.url=a.url||"")},getURL:function(c,b){var d=this.root,e=this.url;return this._isYUIModelList?!e?
this.model.prototype.root:this._substituteURL(e,a.merge(this.getAttrs(),b)):d&&("create"===c||this.isNew())?d:!e?this._joinURL(this.getAsURL("id")||""):this._substituteURL(e,a.merge(this.getAttrs(),b))},parseIOResponse:function(a){return a.responseText},serialize:function(c){return a.JSON.stringify(this)},sync:function(c,b,e){b||(b={});var g=this.getURL(c,b),f=d.HTTP_METHODS[c],k=a.merge(d.HTTP_HEADERS,b.headers),q=b.timeout||d.HTTP_TIMEOUT;b=b.csrfToken||d.CSRF_TOKEN;var s;"POST"===f||"PUT"===f?
s=this.serialize(c):delete k["Content-Type"];if(d.EMULATE_HTTP&&("PUT"===f||"DELETE"===f))k["X-HTTP-Method-Override"]=f,f="POST";if(b&&("POST"===f||"PUT"===f||"DELETE"===f))k["X-CSRF-Token"]=b;this._sendSyncIORequest({action:c,callback:e,entity:s,headers:k,method:f,timeout:q,url:g})},_joinURL:function(a){var b=this.root;if(!b&&!a)return"";"/"===a.charAt(0)&&(a=a.substring(1));return b&&"/"===b.charAt(b.length-1)?b+a+"/":b+"/"+a},_parse:function(a){"function"===typeof this.parseIOResponse&&(a=this.parseIOResponse(a));
return this.parse(a)},_sendSyncIORequest:function(c){return a.io(c.url,{arguments:{action:c.action,callback:c.callback,url:c.url},context:this,data:c.entity,headers:c.headers,method:c.method,timeout:c.timeout,on:{start:this._onSyncIOStart,failure:this._onSyncIOFailure,success:this._onSyncIOSuccess,end:this._onSyncIOEnd}})},_substituteURL:function(c,b){if(!c)return"";var d={};a.Object.each(b,function(a,c){if(e.isString(a)||e.isNumber(a))d[c]=encodeURIComponent(a)});return e.sub(c,d)},_onSyncIOEnd:function(a,
b){},_onSyncIOFailure:function(a,b,d){(a=d.callback)&&a({code:b.status,msg:b.statusText},b)},_onSyncIOSuccess:function(a,b,d){(a=d.callback)&&a(null,b)},_onSyncIOStart:function(a,b){}};a.namespace("ModelSync").REST=d},"3.17.2",{requires:["model","io-base","json-stringify"]})},605:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);a=function(){function a(){d(this,a);this.generateActions("refresh","setUrl","removeLoadHandler","disableEditing","enableEditing")}g(a,[{key:"addLoadHandler",
value:function(a,b){this.dispatch({key:a,callback:b})}}]);return a}();k.exports=f.createActions(a)},606:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);a=function(){function a(){d(this,a);this.generateActions("reset")}g(a,[{key:"updateAttributes",value:function(a,b){a&&this.dispatch({itemId:a,attrs:b})}}]);return a}();k.exports=f.createActions(a)},759:function(k,f,a){var g=a(25);k.exports={save:function(a,e){return g.put("/api/member-website-settings/"+a,e)},commerceUpsellShown:function(a){return g.post("/api/member-website-settings/"+
a+"/commerce-upsell-shown")}}},769:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(21);var e=f.Map,c=f.fromJS;f=a(8);var b=a(47),h=a(41),l=a(285);a=function(){function a(){d(this,a);this.state=e();this.bindListeners({onSiteLayoutReset:[h.bootstrap,l.loadTemplate]});this.exportPublicMethods({getCollectionLinks:this.getCollectionLinks})}g(a,[{key:"onSiteLayoutReset",value:function(a){a=a.siteLayout;if(!a)return!1;var b=e();a.forEach(function(a){b=b.set(a.identifier,c(a))});this.setState(b)}},
{key:"getCollectionLinks",value:function(){return this.state.reduce(function(a,c){var b=c.toJS().links;a.push(b.filter(function(a){return!!a.collectionId}));return a},[])}}]);return a}();k.exports=f.createStore(b(a),"SiteNavigationStore")},770:function(k,f,a){var g=a(138),d=a(25),e=a(287),c=a(1138);k.exports={generateUrl:function(a){if(a.id){var e=3>a.title.length?a.typeName+"-"+a.title:a.title,e=c(e);return d.post("/api/content-collections/"+a.id+"/generate-url",{title:a.title,urlId:e})}},create:function(a){a=
e(a);a=g.stringify(a);return d.post("/api/commondata/SaveCollection",a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},read:function(a){return d.get("/api/commondata/GetCollection",{params:{collectionId:a}})},readAll:function(){return d.get("/api/commondata/GetCollections")},"delete":function(a){return d.post("/api/commondata/RemoveCollection",g.stringify({collectionId:a}))},deleteUnusedPageCollectionPermanently:function(a){return d.post("/api/commondata/unused-start-page-collection",
g.stringify({collectionId:a}))}}},782:function(k,f,a){f=a(8);a=new (a(536))(f);k.exports=a},928:function(k,f){YUI.add("datatype-date-format",function(a,g){var d=function(a,b,d){"undefined"===typeof d&&(d=10);for(b+="";parseInt(a,10)<d&&1<d;d/=10)a=b+a;return a.toString()},e={formats:{a:function(a,b){return b.a[a.getDay()]},A:function(a,b){return b.A[a.getDay()]},b:function(a,b){return b.b[a.getMonth()]},B:function(a,b){return b.B[a.getMonth()]},C:function(a){return d(parseInt(a.getFullYear()/100,
10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return d(parseInt(e.formats.G(a)%100,10),0)},G:function(a){var b=a.getFullYear(),d=parseInt(e.formats.V(a),10);a=parseInt(e.formats.W(a),10);a>d?b++:0===a&&52<=d&&b--;return b},H:["getHours","0"],I:function(a){a=a.getHours()%12;return d(0===a?12:a,0)},j:function(a){var b=new Date(""+a.getFullYear()+"/1/1 GMT");a=new Date(""+a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()+" GMT")-b;a=parseInt(a/6E4/60/24,10)+1;return d(a,0,100)},k:["getHours",
" "],l:function(a){a=a.getHours()%12;return d(0===a?12:a," ")},m:function(a){return d(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a,b){return b.p[12<=a.getHours()?1:0]},P:function(a,b){return b.P[12<=a.getHours()?1:0]},s:function(a,b){return parseInt(a.getTime()/1E3,10)},S:["getSeconds","0"],u:function(a){a=a.getDay();return 0===a?7:a},U:function(a){var b=parseInt(e.formats.j(a),10);a=6-a.getDay();b=parseInt((b+a)/7,10);return d(b,0)},V:function(a){var b=parseInt(e.formats.W(a),10),h=(new Date(""+
a.getFullYear()+"/1/1")).getDay(),b=b+(4<h||1>=h?0:1);53===b&&4>(new Date(""+a.getFullYear()+"/12/31")).getDay()?b=1:0===b&&(b=e.formats.V(new Date(""+(a.getFullYear()-1)+"/12/31")));return d(b,0)},w:"getDay",W:function(a){var b=parseInt(e.formats.j(a),10);a=7-e.formats.u(a);b=parseInt((b+a)/7,10);return d(b,0,10)},y:function(a){return d(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){a=a.getTimezoneOffset();var b=d(parseInt(Math.abs(a/60),10),0),e=d(Math.abs(a%60),0);return(0<a?"-":"+")+b+
e},Z:function(a){var b=a.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");4<b.length&&(b=e.formats.z(a));return b},"%":function(a){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(c,b){b=b||{};if(!a.Lang.isDate(c))return a.Lang.isValue(c)?c:"";var h,g;h=b.format||"%Y-%m-%d";g=a.Intl.get("datatype-date-format");for(var f=function(a,b){var c=e.aggregates[b];
return"locale"===c?g[b]:c},k=function(b,h){var n=e.formats[h];switch(a.Lang.type(n)){case "string":return c[n]();case "function":return n.call(c,c,g);case "array":if("string"===a.Lang.type(n[0]))return d(c[n[0]](),n[1]);default:return h}};h.match(/%[cDFhnrRtTxX]/);)h=h.replace(/%([cDFhnrRtTxX])/g,f);h=h.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,k);f=k=void 0;return h}};a.mix(a.namespace("Date"),e);a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")})},
929:function(k,f,a){var g=a(6)["default"],d=a(4)["default"];f=a(8);var e=a(759);a=function(){function a(){d(this,a);this.generateActions("saveSuccess")}g(a,[{key:"save",value:function(a,c){var d=this;this.dispatch();return e.save(a,c).then(function(a){d.actions.saveSuccess(a)})}}]);return a}();k.exports=f.createActions(a)},966:function(k,f,a){var g=a(6)["default"],d=a(4)["default"],e=a(26)["default"];f=a(21);var c=f.Map,b=f.fromJS;f=a(8);var h=a(587);a=a(47);var l=function(){function a(){d(this,a);
this.state=c();this.bindListeners({onInsert:h.insert,onInsertMany:h.insertMany,onDelete:[h["delete"],h.deleteUnusedCollectionPermanently]});this.exportPublicMethods({fetch:this.fetch,fetchFromServer:this.fetchFromServer})}g(a,[{key:"onInsert",value:function(a){this.setState(this.state.set(a.id,b(a)))}},{key:"onInsertMany",value:function(a){var c=this.state;a.forEach(function(a){return c=c.set(a.id,b(a))});this.setState(c)}},{key:"onDelete",value:function(a){this.setState(this.state["delete"](a))}},
{key:"fetch",value:function(a){var b=this.getState().get(a);return b?e.resolve(b):this.fetchFromServer(a)}},{key:"fetchFromServer",value:function(a){var b=this;return h.read(a).then(function(){return b.getState().get(a)})}}]);return a}();k.exports=f.createStore(a(l),"ContentCollectionStore")},982:function(k,f,a){var g=a(25);k.exports={getTemplate:function(a){return g.get("/api/templates/"+a)}}},983:function(k,f,a){var g=a(25),d=a(138);k.exports={loadTemplateInstallations:function(){return g.get("/api/template-installations")},
setLiveInstallation:function(a){return g.post("/api/template/SetTemplate",d.stringify({installationId:a}))},updateInstallation:function(a){return g.put("/api/template-installations/"+a.id,a)},setHomepageCollectionId:function(a){return g.post("/api/template/SetHomepageCollection",d.stringify({collectionId:a}))}}},1023:function(k,f,a){var g=a(281),d=a(94);YUI.add("squarespace-util-authenticated",function(a){a.namespace("Squarespace");a.Squarespace.UtilAuthenticated={userHasAccessPermission:function(a){return g.hasPermission(a)},
isSquarespaceAdmin:function(){return g.isAdmin()},isBetaFeatureEnabled:function(a){return d.isFeatureEnabled(a)}}},"1.0",{requires:["squarespace-util"]})},1024:function(k,f){YUI.add("datatype-date-math",function(a,g){var d=a.Lang;a.mix(a.namespace("Date"),{isValidDate:function(a){return d.isDate(a)&&isFinite(a)&&"Invalid Date"!=a&&!isNaN(a)&&null!=a?!0:!1},areEqual:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()==c.getTime()},isGreater:function(a,c){return this.isValidDate(a)&&
this.isValidDate(c)&&a.getTime()>c.getTime()},isGreaterOrEqual:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()>=c.getTime()},isInRange:function(a,c,b){return this.isGreaterOrEqual(a,c)&&this.isGreaterOrEqual(b,a)},addDays:function(a,c){return new Date(a.getTime()+864E5*c)},addMonths:function(a,c){var b=a.getFullYear(),d=a.getMonth()+c,b=Math.floor(b+d/12),d=(d%12+12)%12,g=new Date(a.getTime());g.setFullYear(b);g.setMonth(d);return g},addYears:function(a,c){var b=a.getFullYear()+
c,d=new Date(a.getTime());d.setFullYear(b);return d},listOfDatesInMonth:function(a){if(!this.isValidDate(a))return[];var c=this.daysInMonth(a),b=a.getFullYear();a=a.getMonth();for(var d=[],g=1;g<=c;g++)d.push(new Date(b,a,g,12,0,0));return d},daysInMonth:function(a){if(!this.isValidDate(a))return 0;var c=a.getMonth(),b=[31,28,31,30,31,30,31,31,30,31,30,31];if(1!=c)return b[c];a=a.getFullYear();return 0===a%400?29:0===a%100?28:0===a%4?29:28}});a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",
{requires:["yui-base"]})},1025:function(k,f){YUI.add("datatype-date-parse",function(a,g){a.mix(a.namespace("Date"),{parse:function(d){d=new Date(+d||d);return a.Lang.isDate(d)?d:null}});a.namespace("Parsers").date=a.Date.parse;a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2")},1071:function(k,f,a){f=a(164);var g=a(33);a=a(1074);k.exports={DEFAULT_COLLECTION_CONFIGURATIONS:{page:{collectionType:g.COLLECTION_TYPE_PAGE,typeName:"page",title:"Page",ordering:f.CUSTOM,icon:"page",addText:"Add Block"},
"gallery-block":{collectionType:g.GALLERY_BLOCK,typeName:"gallery-block",title:"Gallery Block",ordering:f.USER,acceptTypes:["image","video"]},products:{collectionType:g.PRODUCTS,typeName:"products",title:"Products",pageSize:20,ordering:f.USER,acceptTypes:["store_item"],view:a.PRODUCT_TABLE,icon:"products",addText:"Add Product"},"template-page":{collectionType:g.TEMPLATE_PAGE,title:"Template Page",icon:"projects"},"splash-page":{collectionType:g.SPLASH_PAGE,typeName:"splash-page",title:"Cover Page",
ordering:f.CUSTOM,icon:"splash-page"},subscription:{collectionType:g.COLLECTION_TYPE_SUBSCRIPTION,typeName:"subscription",title:"Subscription",ordering:f.CHRONOLOGICAL}},DEFAULT_COLLECTION_CONFIGURATION:{collectionType:g.COLLECTION_TYPE_GENERIC,supported:!0,supportsVideoBackgrounds:!1},DEFAULT_TEMPLATE_PAGE_CONFIGURATION:{icon:"template-page",collectionType:g.TEMPLATE_PAGE,supported:!0,folder:!1,supportsVideoBackgrounds:!1}}},1074:function(k,f){k.exports={LIST:"list",GRID:"grid",PRODUCT:"product"}},
1135:function(k,f,a){var g=a(6)["default"],d=a(4)["default"],e=a(21);f=a(8);var c=a(606),b=a(146),h=a(149);a=a(47);var l=e.Map,m=function(){function a(){d(this,a);this.state=l();this.bindListeners({onUpdateAttributes:c.updateAttributes,unstageChanges:[b.insert,b["delete"],c.reset]});this.exportPublicMethods({fetchStaged:this.fetchStaged,getItemDirtyState:this.getItemDirtyState,getItemState:this.getItemState,unstageChanges:this.unstageChanges})}g(a,[{key:"onUpdateAttributes",value:function(a){var b=
e.fromJS(a.attrs),c=this.state.get(a.itemId);c&&(b=c.merge(a.attrs));this.setState(this.state.set(a.itemId,b))}},{key:"unstageChanges",value:function(a){a&&a.id&&this.setState(this.state["delete"](a.id))}},{key:"getItemState",value:function(a){if(a=this.state.get(a))return a.toJS()}},{key:"getItemDirtyState",value:function(a){return!!this.state.get(a)}},{key:"fetchStaged",value:function(a,b){var c=this.state.get(a);return h.fetch(a,!1,b).then(function(a){return c?a.merge(c.toJS()):a})}}]);return a}();
k.exports=f.createStore(a(m),"YUIStagedContentItemStore")},1138:function(k,f){k.exports=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"").toLowerCase().replace(/[^a-z0-9_\s]+/g,"").replace(/[\s]+/g,"-")}},1157:function(k,f,a){var g=a(100),d=a(33),e=a(573);YUI.add("squarespace-content-collection-utils",function(a){a.namespace("Squarespace").ContentCollectionUtils={groupCollectionsByTypeName:function(b){for(var d={},e=0;e<b.length;e++){var f=b[e];if(!f.get("isDemoCollection")){f=f.get("typeName");
if(!d[f]){var k=g.getState().collectionConfigs[f];d[f]={title:k?k.title:"Unknown",collections:[]}}d[f].collections.push(b[e])}}return a.Object.values(d)},getIconClassNames:function(a){var c=a.getTemplateConfiguration(),e="";c&&c.get("supported")&&(e=c.get("icon"));""===e&&(c&&c.get("collectionType")===d.TEMPLATE_PAGE)&&(e="template-page");""===e&&(e=a.get("typeName"));return e},filterCollections:function(b,e){var g=["collectionType","ordering","folder","index"];return a.Squarespace.ContentCollectionCache.filter(function(f){if(a.Lang.isArray(e)&&
-1!==e.indexOf(f.get("id"))||f.get("isDemoCollection")&&f.get("type")!==d.TEMPLATE_PAGE)return!1;var k=!0,q=f.getTemplateConfiguration(),s;for(s in b)if(k=b[s],a.Lang.isArray(k)||(k=[k]),k=a.Array.some(k,function(b,d){var e;e=s;e=-1!==g.indexOf(e)?a.Lang.isValue(q)&&q.get(e)===b:f.get(e)===b;return e}),!k)break;return k})},getCollectionFilter:function(a,c){return a===d.PRODUCTS?{collectionType:a}:{collectionType:a,ordering:c}},isTemplatePage:function(a){return a.get("type")===d.TEMPLATE_PAGE},isIndex:function(a){return(a=
a.getTemplateConfiguration())&&a.get("folderBehavior")==e.INDEX?!0:!1},isFolder:function(a){return(a=a.getTemplateConfiguration())&&a.get("folder")},isVanillaFolder:function(a){return this.isFolder(a)&&!this.isIndex(a)},isAdjustablePageSizeCollection:function(b){var e=g.getCollectionConfig(b.get("typeName")),e=e&&e.forcePageSize,f=b.get("type")===d.COLLECTION_TYPE_GENERIC,k=this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL;return!e&&!this.isIndex(b)&&!this.isFolder(b)&&
f&&k},isBlog:function(b){return!this.isGenericOrProduct(b)||this.isFolder(b)||this.isIndex(b)?!1:this._getCollectionOrdering(b)==a.Squarespace.CollectionOrdering.CHRONOLOGICAL?!0:!1},_getCollectionOrdering:function(a){return a.get("ordering")||a.getTemplateConfiguration().get("ordering")},isPostableByEmailAddress:function(b){var e=this._getCollectionOrdering(b);return!this.isIndex(b)&&!this.isFolder(b)&&b.get("type")===d.COLLECTION_TYPE_GENERIC&&e!==a.Squarespace.CollectionOrdering.CALENDAR&&e!==
a.Squarespace.CollectionOrdering.CUSTOM&&e!==a.Squarespace.CollectionOrdering.MUSIC_ALBUM},isSupportedByBookmarklet:function(b){return!this.isIndex(b)&&!this.isFolder(b)&&b.get("type")===d.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForInjectableCodePerItem:function(b){return!this.isIndex(b)&&!this.isFolder(b)&&b.get("type")===d.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL},
hasSupportForSyndication:function(b){return!this.isIndex(b)&&!this.isFolder(b)&&b.get("type")===d.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(b)===a.Squarespace.CollectionOrdering.CHRONOLOGICAL},isDemoCollectionId:function(b){var d=g.getState().demoCollections;return!d?!1:!!a.Array.find(d,function(a){return a.collectionId==b})},isGenericOrProduct:function(a){a=a.getTemplateConfiguration();return!a?!1:!1===a.get("folder")&&(a.get("collectionType")===d.PRODUCTS||a.get("collectionType")===d.COLLECTION_TYPE_GENERIC)},
isProduct:function(a){var c=a.getTemplateConfiguration();return!c||a.get("isDemoCollection")?!1:!1===c.get("folder")&&c.get("collectionType")===d.PRODUCTS},isPage:function(a){a=a.getTemplateConfiguration();return!a?!1:!1===a.get("folder")&&a.get("collectionType")===d.COLLECTION_TYPE_PAGE},isNotCalendar:function(b){return b.getTemplateConfiguration().get("ordering")===a.Squarespace.CollectionOrdering.CALENDAR?!1:!0},usesDisplayIndex:function(b){return[a.Squarespace.CollectionOrdering.MUSIC_ALBUM,a.Squarespace.CollectionOrdering.USER].contains(b)},
getIdentifierForCollection:function(b){if(!a.Lang.isValue(b))return null;var e=b.get("typeName");!e&&b.get("type")===d.COLLECTION_TYPE_PAGE&&(b.set("typeName","page"),e="page");var f=b.get("type");if(f===d.COLLECTION_TYPE_GENERIC){var k=b.get("ordering");a.Lang.isValue(k)||(k=g.getCollectionConfig(e),e=g.getPageConfig(e),k=(k||e).ordering);if(a.Squarespace.ContentCollectionUtils.isIndex(b))return"INDEX";if(k===a.Squarespace.CollectionOrdering.USER)return"GALLERY";if(k===a.Squarespace.CollectionOrdering.CHRONOLOGICAL)return"BLOG";
if(k===a.Squarespace.CollectionOrdering.CALENDAR)return"CALENDAR";if(k===a.Squarespace.CollectionOrdering.MUSIC_ALBUM)return"MUSIC_ALBUM";if(k===a.Squarespace.CollectionOrdering.KNOWLEDGE_BASE)return"KNOWLEDGE_BASE"}if(f===d.COLLECTION_TYPE_PAGE)return"PAGE";if(f===d.PRODUCTS)return"PRODUCT";if(f===d.TEMPLATE_PAGE)return"TEMPLATE_PAGE"}}},"MY FATHER WAS A ROBOT, BUT HIS FATHER WAS A HUMAN",{requires:["squarespace-models-content-collection"]})},1161:function(k,f){YUI.add("squarespace-mixins-event-list",
function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.EventList=a.Base.create("EventList",a.Base,[],{initializer:function(){a.Do.before(function(g){var d=a.Object.hasKey(g,"upcoming"),e=a.Object.hasKey(g,"past");if(d&&e)return new a.Do.AlterArgs("Parsing calendar-specific response",[[].concat(g.upcoming).concat(g.past)])},this,"parse",this)},getPastEvents:function(){var g=new Date;return this.filter(function(d){d=d.get("structuredContent");if(null===d)return!1;d=a.DataType.Date.parse(d.get("endDate"));
return a.DataType.Date.isGreater(g,d)})},getUpcomingEvents:function(){var g=new Date;return this.filter(function(d){d=d.get("structuredContent");if(null===d)return!1;d=a.DataType.Date.parse(d.get("endDate"));return!a.DataType.Date.isGreater(g,d)})}})},"1.0",{requires:["base","datatype-date","event-custom","json"]})},1162:function(k,f){YUI.add("squarespace-models-audio",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Audio=a.Base.create("Audio",a.Squarespace.Models.StructuredContent,
[],{},{ATTRS:{_type:{value:"Audio",validator:function(a){return"Audio"===a},readOnly:!0},embed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},audioAssetUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},artistName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},lengthInMilliSeconds:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},bitRate:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},sampleRate:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1163:function(k,f){YUI.add("squarespace-models-calendar-event",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.CalendarEvent=a.Base.create("CalendarEvent",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CalendarEvent",validator:function(a){return"CalendarEvent"===a},readOnly:!0},startDate:{valueFn:function(){var a=
new Date,d=a.getMinutes();a.setSeconds(0);a.setMilliseconds(0);30<=d?(a.addHours(1),a.setMinutes(0)):a.setMinutes(30);return a.getTime()},validator:a.Squarespace.AttrValidators.isNumber},endDate:{valueFn:function(){var a=new Date(this.get("startDate"));a.addHours(1);return a.getTime()},validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1164:function(k,f){YUI.add("squarespace-models-check-in",function(a){a.namespace("Squarespace.Models");
a.Squarespace.Models.CheckIn=a.Base.create("CheckIn",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CheckIn",validator:function(a){return"CheckIn"===a},readOnly:!0},checkinId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},venueId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},venueName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},address:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},crossStreet:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},city:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},state:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},country:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},postalCode:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
categoryPluralName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryShortName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryIcon:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1165:function(k,f,a){var g=a(33),d=a(573);YUI.add("squarespace-models-collection-configuration",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.CollectionConfiguration=
a.Base.create("CollectionConfiguration",a.Model,[],{initializer:function(c){a.Lang.isBoolean(c.index)&&c.index?this.set("folderBehavior",d.INDEX):a.Lang.isBoolean(c.folder)&&c.folder&&this.set("folderBehavior",d.NONE)}},{ATTRS:{collectionType:{value:g.COLLECTION_TYPE_GENERIC},folder:{value:!1},folderBehavior:{},supported:{value:!0}}})},"1.0",{requires:["base","model"]})},1166:function(k,f,a){a(8);var g=a(326),d=a(294),e=a(100),c=a(587),b=a(966),h=a(33),l=a(148),m=a(298),r=a(164);YUI.add("squarespace-models-content-collection",
function(a){a.namespace("Squarespace.Models");var f=a.Squarespace.Models.ContentCollection=a.Base.create("Collection",a.Model,[],{initializer:function(c){this.publish("delete");this.items=c?new a.Squarespace.Models.ContentItemList({items:c.items||[],parent:this,limit:this.get("itemLimit")}):new a.Squarespace.Models.ContentItemList({parent:this,limit:this.get("itemLimit")});this._itemsEventHandle=this.items.after(["load","add","remove"],this._updateItemCount,this);this._syncFolderChange(this.get("folder"));
this.after("folderChange",function(a){this._syncFolderChange(a.newVal)});this._initialAttrs=this.getAttrs();this.unlistenToModelStore=b.listen(this._handleStoreChange.bind(this))},destructor:function(){this._itemsEventHandle.detach();this._itemsEventHandle=null;this.items.destroy();this.items=null},toDebugString:function(){return a.JSON.stringify(this.getAttrs(["navigationTitle","urlId","id"]))},toJSON:function(){var a=this.constructor.superclass.toJSON.call(this);a.items=this.items.toJSON();return a},
parse:function(a){a=f.superclass.parse.apply(this,arguments);a.passwordProtected&&(a.password=l.PASSWORD_MASK);return a},sync:function(a,b,c){switch(a){case "create":this._ensureDemoCloneAndSave(c);break;case "delete":this.fire("delete",b);b.isUnusedStarterPage?this._deleteUnusedCollectionPermanently(c):this._delete(c);break;case "read":this._read(b,c);break;case "update":this._ensureDemoCloneAndSave(c)}},load:function(c,b,d){"function"===typeof c&&(d=b,b=c,c={});if(this._readInProgress)this.onceAfter("load",
b,d);else a.Model.prototype.load.call(this,c,b?a.bind(b,d||this):null)},resetToLastRead:function(){return b.fetch(this.get("id")).then(function(b){var c=this.getAttrs();a.Object.keys(c).map(function(a){c[a]=void 0});b=a.merge(c,this._initialAttrs,this.parse(b.toJS()));this.setAttrs(b);this.set("dirty",!1)}.bind(this)).catch(this._errorHandler)},updateAttributes:function(a,b){this.setAttrs(a,b)},ensureProcessedItems:function(){var b=function(c){this.items.load({fields:["mediaProcessingState"]},function(){this.items.some(function(a){return a.get("mediaProcessingState")!==
m.READY})?a.later(500,this,b,c):c()}.bind(this))}.bind(this);return new a.Promise(function(a){b(a)}.bind(this))},_syncFolderChange:function(a){a&&this.set("dropdown",!0)},_ensureDemoCloneAndSave:function(b){if(this._shouldCloneCollection()){var c=this.toJSON();delete c.id;this.cloneToNewCollection({silent:!0}).then(a.bind(this._save,this,b,c))}else this._save(b)},_handleStoreChange:function(a){if(a=a.get(this.getId()))this.setAttrs(this.parse(a.toJS())),this.set("dirty",!1)},serialize:function(b){b=
a.merge(b,this.toJSON());b.collectionId=b.id;delete b.dirty;delete b.body;delete b.tags;delete b.categories;delete b.iTunesImage;delete b.items;a.Lang.isValue(b.mainImage)&&(b.mainImageId=a.instanceOf(b.mainImage,a.Squarespace.Models.ContentItem)?b.mainImage.get("id"):b.mainImage.id);delete b.mainImage;b.metadata&&b.metadata.albumCover&&delete b.metadata.albumCover;b.productQuickViewEnabled&&(b.features.productQuickView.isEnabled=b.productQuickViewEnabled,delete b.productQuickViewEnabled);b.relatedItemsEnabled&&
(b.features.relatedItems.isEnabled=b.relatedItemsEnabled,delete b.relatedItemsEnabled);return b},_errorHandler:function(a){console.error(a.stack)},_save:function(a,b){b=this.serialize(b);c.update(b).then(function(b){b.error?a(b,null):(this._initialAttrs=b,a(null,b))}).catch(this._errorHandler)},_delete:function(a){c.delete(this.get("id")).then(function(b){a(null,b)},function(b){a(b,null)}).catch(this._errorHandler)},_deleteUnusedCollectionPermanently:function(a){c.deleteUnusedCollectionPermanently(this.get("id")).then(function(b){a(null,
b)},function(b){a(b,null)}).catch(this._errorHandler)},_read:function(c,d){this._readInProgress=!0;b.fetch(this.get("id")).then(function(b){var c=this.parse(b.toJS());a.Squarespace.ContentCollectionUtils.usesDisplayIndex(c.ordering)?this._fetchItemCount(c.id).then(function(a){this._readInProgress=!1;c.itemCount=a;d(null,c)}.bind(this)):(this._readInProgress=!1,d(null,c))}.bind(this),function(a){this._readInProgress=!1;d(a,null)}.bind(this)).catch(this._errorHandler)},_updateItemCount:function(){a.Squarespace.ContentCollectionUtils.usesDisplayIndex(this.get("ordering"))&&
(this.isNew()?this.set("itemCount",0):this._fetchItemCount(this.get("id")).then(function(a){this.set("itemCount",a)}.bind(this)).catch(this._errorHandler))},_fetchItemCount:function(b){return new a.Promise(function(c,d){a.Data.get({url:"/api/content-collections/"+b+"/item-count",success:function(a){c(a)},failure:d},this)})},getTemplateConfiguration:function(){var b;b=this.get("typeName");var c=this.get("type");return(b=c===h.TEMPLATE_PAGE?e.getPageConfig(b):e.getCollectionConfig(b))?new a.Squarespace.Models.CollectionConfiguration(b):
new a.Squarespace.Models.CollectionConfiguration({collectionType:c||h.COLLECTION_TYPE_GENERIC,ordering:this.get("ordering"),folder:this.get("folder"),supported:!1})},cloneToNewCollection:function(b){return new a.Promise(a.bind(function(c,d){var e=a.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id"));this._cloneExampleContent(b).then(a.bind(function(a){e.set("collectionId",a);e.save(c)},this))},this))},_cloneExampleContent:function(b){b=b||{};var c=new a.Promise(a.bind(function(c,
e){var h=this.get("id");a.Data.post({url:"/api/commondata/CopyCollection",data:{collectionId:this.get("id"),processPointedCollectionItems:!!b.processPointedCollectionItems},success:function(b){this.setAttrs(a.merge({mainImageId:null,mainImage:null},b));var f=b.id;g.getHomepageCollectionId()===h?d.setHomepageCollectionId(f).then(function(a){a.error?e():c(f)}):c(f)}},this)},this));c.then(a.bind(function(){this.fire("clonedExampleContent",{silent:!!b.silent})},this));return c},_shouldCloneCollection:function(){return this.get("isDemoCollection")&&
this.get("type")===h.COLLECTION_TYPE_PAGE},deleteTrashItems:function(b){a.Data.del({url:"/api/recycle-bin/collection/"+this.get("id")+"/items",success:function(a){b(a,null)},failure:function(a){b(null,a)}})},getId:function(){return this.get("id")},_set:function(a,b,c){return this.constructor.superclass._set.call(this,a,b,c)}},{ATTRS:{dirty:{value:!1},body:{value:null},title:{validator:a.Lang.isString},navigationTitle:{validator:a.Lang.isString},description:{value:{html:"",source:""}},websiteId:{},
id:{value:null},enabled:{value:!0,validator:a.Lang.isBoolean},deleted:{value:!1,validator:a.Lang.isBoolean},homepage:{validator:a.Lang.isBoolean},starred:{validator:a.Lang.isBoolean},synchronizing:{validator:a.Lang.isBoolean},updatedOn:{},folder:{value:!1},isDemoCollection:{getter:function(){return a.Squarespace.ContentCollectionUtils.isDemoCollectionId(this.get("id"))}},itemCountExceeded:{getter:function(){return this.get("type")==h.PRODUCTS&&this.get("itemCount")>=this.get("maxItemCount")?!0:!1}},
itemCount:{validator:a.Lang.isNumber},isEmpty:{getter:function(){return 0===this.items.size()}},maxItemCount:{getter:function(){return this.get("type")==h.PRODUCTS?200:9999}},tags:{value:[],validator:a.Lang.isArray},categories:{value:[],validator:a.Lang.isArray},pageSize:{validator:a.Lang.isNumber,valueFn:function(){if(this.getTemplateConfiguration().get("ordering")===r.CHRONOLOGICAL)return 20}},itemLimit:{value:20,validator:a.Squarespace.AttrValidators.isNumber},ordering:{validator:function(b){return a.Object.values(r).contains(b)}},
type:{validator:function(b){return a.Object.values(h).contains(b)}},typeName:{validator:a.Lang.isString},video:{validator:a.Lang.isObject},fullUrl:{validator:a.Lang.isString},urlId:{validator:a.Squarespace.AttrValidators.isNullOrString},nextDisplayIndex:{getter:function(){return this.get("itemCount")}},regionName:{value:"default",validator:function(b){return!a.Lang.isString(b)||0===b.length?!1:a.Object.keys(e.getState().layouts).contains(b)}},postByEmailAddress:{getter:function(a){return a?a+"@squarespace.com":
""}}}});a.Squarespace.Models.ContentCollectionList=a.Base.create("Collections",a.ModelList,[],{model:a.Squarespace.Models.ContentCollection,sync:function(a,b,d){"read"==a&&c.readAll().then(function(a){d(null,a)},function(a){d(a,null)}).catch(this._errorHandler)},getCollectionById:function(b,c,d){var e=this.getById(b);e?c.call(d,e):(e=new a.Squarespace.Models.ContentCollection({id:b}),e.load({},function(){this.add(e);c.call(d,e)},this))},getCollectionFromData:function(b,c){if(!b)return null;if(!b.id)throw Error("getCollectionFromData needs at least an ID in the data to work.");
var d=this.getById(b.id);d?c||d.setAttrs(b):d=this.add(new a.Squarespace.Models.ContentCollection(b));return d}});a.Squarespace.Utils.isInDamaskFrame()?a.Squarespace.ContentCollectionCache=a.config.win.top.Y.Squarespace.ContentCollectionCache:a.Squarespace.ContentCollectionCache=new a.Squarespace.Models.ContentCollectionList},"2.0",{requires:"base model model-list promise squarespace-content-collection-utils squarespace-models-collection-configuration squarespace-models-content-item squarespace-models-content-item-list squarespace-util squarespace-util-authenticated".split(" ")})},
1167:function(k,f,a){var g=a(166);YUI.add("squarespace-models-content-item-list",function(a){a.namespace("Squarespace.Models");var e=a.Squarespace.Models.ContentItemList=a.Base.create("ContentItemList",a.ModelList,[a.Squarespace.Mixins.EventList],{initializer:function(c){this.model=a.Squarespace.Models.ContentItem;c=c||{};(c=c.items)&&this.reset(c)},sync:function(a,b,d){switch(a){case "create":console.error("Squarespace.Models.ContentItemList: Create not implemented.");break;case "delete":console.error("Squarespace.Models.ContentItemList: Create not implemented.");
break;case "read":this._read(b,d);break;case "update":console.error("Squarespace.Models.ContentItemList: Create not implemented.")}},load:function(a,b){if(this.get("isChildItemList"))throw Error("Squarespace.Models.ContentItemList: Child items are loaded with their parent item. Loading them manually is not supported");e.superclass.load.call(this,a,b)},removeItems:function(c,b){this.remove(c,{source:"bulk-remove"});var e=a.Array.map(c,function(a){var b=a.get("id");a.destroy();return b},this);a.Data.post({url:"/api/commondata/RemoveItems",
data:{items:e},success:function(e){this.get("parent").load();a.Lang.isFunction(b)&&b(null,e);this.fire("bulk-remove",c)},failure:function(c){a.Lang.isFunction(b)&&b(c,null)}},this)},moveItems:function(c,b,e){if(this.get("isChildItemList"))throw Error("Squarespace.Models.ContentItemList: Moving child items is not currently supported.");var g=a.Array.map(c,function(a){return null!==this.getById(a.get("id"))?this.remove(this.getById(a.get("id"))):a},this),f=b.get("id"),k=b.items;k.load(a.bind(function(){k.add(g)},
this));var q=a.Array.map(g,function(a){a.set("collectionId",f);a.get("items").each(function(a){a.set("collectionId",f)});a.save();return a.get("id")},this);a.Data.post({url:"/api/commondata/MoveItems",data:{toCollectionId:f,items:q},success:function(g){this.get("parent").load();a.Lang.isFunction(e)&&e(null,g);this.fire("move-items",c,b)},failure:function(b){a.Lang.isFunction(e)&&e(b,null)}},this)},reorderItems:function(c,b,e){var g=this.get("parent"),f={};this.get("isChildItemList")?(f.collectionId=
g.get("collectionId"),f.parentId=g.get("id")):f.collectionId=g.get("id");var k=1===c.length,q;k?(c=c[0],q=this.indexOf(this.getById(c.get("id"))),this._reorder([c],b),0!==b&&(f.afterId=this.item(b-1).get("id")),f.itemId=c.get("id")):(this._reorder(c,b),0!==b&&(f.afterId=this.item(b-1).get("id")),c=a.Array.map(c,function(a){return a.get("id")},this),f.itemIds=a.JSON.stringify(c));var s=a.bind(function(c){a.Data.post({url:"/api/commondata/ReorderItems",data:c,success:function(c){k&&(0===q||0===b)&&
g.load();a.Lang.isUndefined(c.items)||a.Array.each(c.items,function(a,b){this.getById(a.id).set("displayIndex",a.displayIndex)},this);this.fire("reordered");a.Lang.isFunction(e)&&e(null,c);0<this._reorderQueue.size()&&s(thie._reorderQueue.next())},failure:function(b){a.Lang.isFunction(e)&&e(b,null)}},this)},this);this._reorderQueue||(this._reorderQueue=new a.Queue);this._reorderQueue.add(f);s(this._reorderQueue.next())},_reorder:function(a,b){var d=a.map(function(a){return this.getById(a.get("id"))},
this);this.remove(d,{onReorder:!0,source:"reorder"});this.add(d,{onReorder:!0,source:"reorder",index:b})},_read:function(c,b){a.Data.get({url:this._getReadUrl(),data:a.merge({limit:this.get("limit")},c),success:function(a){this.set("pagination",{hasNextPage:a.hasNextPage,hasPreviousPage:a.hasPreviousPage,nextPageStart:a.nextPageStart,previousPageStart:a.previousPageStart});b(null,a.results)},failure:function(a){b(a,null)}},this)},_getReadUrl:function(){var c=this.get("parent"),b=g.getTemplateForCollectionItems(c.get("ordering"),
c.get("type"));return a.Lang.sub(b,{collectionId:c.get("id")})}},{ATTRS:{parent:{value:null,validator:function(c){return c instanceof a.Squarespace.Models.ContentCollection||c instanceof a.Squarespace.Models.ContentItem}},isChildItemList:{getter:function(){return this.get("parent")instanceof a.Squarespace.Models.ContentItem}},pagination:{value:null},limit:{value:20,validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:"base json model-list squarespace-content-collection-utils squarespace-mixins-event-list squarespace-models-content-collection squarespace-models-content-item squarespace-util".split(" ")})},
1168:function(k,f,a){var g=a(534),d=a(298),e=a(97),c=a(535),b=a(782),h=a(146),l=a(149),m=a(606),r=a(1135),q=a(95);a(173);var s=a(166);YUI.add("squarespace-models-content-item",function(a){a.namespace("Squarespace.Models");var f=a.Squarespace.Models.ContentItem=a.Base.create("Item",a.Model,[],{sync:function(a,b,c){switch(a){case "delete":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._delete.bind(this,c));break;case "read":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._read.bind(this,
b,c));break;case "update":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._save.bind(this,c));break;case "create":this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._create.bind(this,b,c))}},_errorHandler:function(a){console.error(a.stack)},_save:function(a,b){var c=this.serialize();c.id||this._create(a);c.collectionId?h.updateForCollection(c,b).then(function(b){this._initialAttrs=b;a(null,b)},function(b){a(b,null)}).catch(this._errorHandler):
h.update(c).then(function(b){this._initialAttrs=b;a(null,b)},function(b){a(b,null)}).catch(this._errorHandler)},_create:function(a,b,c){var d=this.serialize();d.collectionId?h.createForCollection(d,a,c).then(function(a){b(null,a)},function(a){b(a,null)}).catch(this._errorHandler):h.create(d,a).then(function(a){b(null,a)},function(a){b(a,null)}).catch(this._errorHandler)},_delete:function(a,b){h.delete(this.get("id"),b).then(function(b){a(null,b)},function(b){a(b,null)}).catch(this._errorHandler)},
_read:function(a,b,c){this.get("isGlobalFakeContentItem")?this._readGlobalFakeContentItem(this.get("id"),a,b):(this._readInProgress=!0,a.forceReload?h.read(this.get("id"),!1,c).then(function(a){this._readInProgress=!1;a=a?a.toJS():a;b(null,a)}.bind(this),function(a){this._readInProgress=!1;b(a,null)}.bind(this)).catch(this._errorHandler):r.fetchStaged(this.get("id"),c).then(function(a){this._readInProgress=!1;b(null,a.toJS())}.bind(this),function(a){this._readInProgress=!1;b(a,null)}.bind(this)).catch(this._errorHandler))},
_readGlobalFakeContentItem:function(b,c,d){a.Data.get({url:"/api/rest/global-content-items/"+b,success:function(a){d(null,a)},failure:function(a){d(a,null)}},this)},_getUrlDeterminants:function(a){var b={recordType:this.get("recordType")};a&&(b.collectionOrdering=a.get("ordering"),b.collectionType=a.get("type"),b.collectionId=a.get("id"),b.parentId=this.get("parentId"));return b},resetToLastRead:function(){m.reset(this.toJSON())},initializer:function(a){this._needsJobListener()&&this._bindJobListener();
this._updateNextDisplayIndex();a=this.get("items");a.after(["add","remove"],function(){this._updateNextDisplayIndex();m.updateAttributes(this.getId(),{items:this.get("items")})},this);this.items=a;this._initialAttrs=this.getAttrs();this.bindListenersToContentStores()},destructor:function(){this._jobListener&&(this._jobListener.detach(),this._jobListener=null);this._actionListeners&&this._actionListeners.forEach(function(a){b.removeActionListener(a)})},bindListenersToContentStores:function(){this._actionListeners=
[];this._actionListeners.push(b.addActionListener(m.UPDATE_ATTRIBUTES,this._onUpdate.bind(this)));this._actionListeners.push(b.addActionListener(m.RESET,this._onReset.bind(this)));this._actionListeners.push(b.addActionListener(h.INSERT,this._onInsert.bind(this)))},_onUpdate:function(b){this.get("id")===a.Object.getValue(b,["itemId"])&&this._setAttrsInOrder(b.attrs)},_onReset:function(b){this.get("id")===a.Object.getValue(b,["id"])&&l.fetch(this.get("id")).then(function(b){var c=this.getAttrs();a.Object.keys(c).map(function(a){c[a]=
void 0});b=a.merge(c,this._initialAttrs,b.toJS());this._setAttrsInOrder(b)}.bind(this)).catch(this._errorHandler)},_onInsert:function(b){if(this.get("id")===a.Object.getValue(b,["id"])){var c=r.getItemState(this.getId());this._setAttrsInOrder(a.merge(b,c))}},_getParentCollection:function(){return new a.Promise(function(b,c){var d=this.get("collectionId");d?a.Squarespace.ContentCollectionCache.getCollectionById(d,b):b(null)}.bind(this))},_setAttrsInOrder:function(a){if(a&&a.mediaProcessingState){var b=
Object.keys(a).filter(function(a){return"mediaProcessingState"!==a}).reduce(function(b,c){b[c]=a[c];return b},{});this.setAttrs(b);this.set("mediaProcessingState",a.mediaProcessingState)}else this.setAttrs(a)},updateAttributes:function(a,b){this.setAttrs(a,b);m.updateAttributes(this.getId(),a)},toJSON:function(){var b=f.superclass.toJSON.call(this),c=b.structuredContent;a.Lang.isValue(c)&&(b.structuredContent=c.toJSON());b.items=b.items.toJSON();a.Lang.isObject(b.pushedServices)&&(b.pushedServices=
a.Object.keys(b.pushedServices));a.Lang.isObject(b.pendingPushedServices)&&(b.pendingPushedServices=a.Object.keys(b.pendingPushedServices));return b},serialize:function(){var a=this.toJSON();delete a.dirty;delete a.items;delete a.author;delete a.fullUrl;delete a.assetUrl;delete a.resolved;delete a.postItemInjectCode;delete a.promotedBlock;delete a.promotedBlockType;delete a.nextDisplayIndex;delete a.mediaIsUploading;delete a.hasFileData;delete a.isGlobalFakeContentItem;delete a.childrenGroups;delete a.colorData;
delete a.mainImage;delete a.gallery;this._normalizeDates(a);this._attachCommentingToData(a);this._attachWorkflowToData(a);this._updateStructuredContent(a);return a},_updateStructuredContent:function(b){b.structuredContent&&b.startDate&&(b.structuredContent=a.merge(b.structuredContent,{startDate:b.startDate,endDate:b.endDate}))},_getWorkflowStateForString:function(b){return a.Object.getValue({published:c.PUBLISHED,scheduled:c.SCHEDULED,needsreview:c.NEEDS_REVIEW,draft:c.DRAFT},b)},_attachWorkflowToData:function(b){a.Lang.isValue(b.workflow)&&
(b.workflowState=this._getWorkflowStateForString(b.workflow.state),b.publishOn=b.workflow.date,delete b.workflow)},_attachCommentingToData:function(b){a.Lang.isValue(b.commenting)&&(b.commentState=a.Squarespace.CommentStates["allow"===b.commenting.state?"ENABLED":"DISABLED"],b.commentDisableOn=b.commenting.date,delete b.commenting)},_normalizeDates:function(b){a.Array.each("addedOn publishOn updatedOn commentDisableOn startDate endDate".split(" "),function(c,d){a.Lang.isDate(b[c])&&(b[c]=b[c].getTime())},
this)},save:function(b,c){this.isNew()||!a.Lang.isObject(b)||!b.fields?f.superclass.save.call(this,b,c):this._saveFields(b.fields,c)},autoSave:function(b,c){a.Lang.isFunction(b)?(c=b,b={}):a.Lang.isValue(b)||(b={});b.headers=a.merge(b.headers,{"X-AutoSave":!0});this.save(b,c)},like:function(b){a.Data.post({url:"/api/content-items/"+this.getId()+"/sentiment/like",success:function(c){a.Lang.isFunction(b)&&b(null,c)},failure:function(c){a.Lang.isFunction(b)&&b(c,null)}},this)},dislike:function(b){a.Data.post({url:"/api/content-items/"+
this.getId()+"/sentiment/dislike",success:function(c){a.Lang.isFunction(b)&&b(null,c)},failure:function(c){a.Lang.isFunction(b)&&b(c,null)}},this)},clearFileData:function(b){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null});this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(b){var c=this.get("id");b=s.getMainImageDeletionUrl(b).replace("{id}",c);a.Data.del({url:b,data:{itemId:c}})}.bind(this))},
clearChildGroup:function(b,c){a.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:b,itemId:this.get("id")},success:function(b){a.Lang.isFunction(c)&&c(null,b)},failure:function(b){a.Lang.isFunction(c)&&c(b,null)}})},getAssetUrlForFormat:function(b){return a.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:b})},getId:function(){return this.get("id")},isLicensedAssetPreview:function(){return a.Lang.isValue(this.get("licensedAssetPreview"))},isLicensedAsset:function(){return a.Lang.isValue(this.get("licensedAssetId"))},
getMainImageUploadUrl:function(a){this._getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(b){a(s.getMainImageUploadUrl(b).replace("{id}",this.get("id")))}.bind(this))},_needsJobListener:function(){var a=this.get("mediaProcessingState");return a===d.QUEUED||a===d.PROCESSING},_bindJobListener:function(){Static&&Static.JOB_MANAGER&&(this._jobListener=a.config.win.Static.JOB_MANAGER.on("completed",function(b){var c=b.job;b=this.get("id");var d=c.get("data.contentItemId"),c=
c.get("data.globalContentItemId");d===b?(this.load({forceReload:!0}),this._jobListener.detach()):a.Lang.isValue(c)&&c===b&&(this._readGlobalFakeContentItem(c,{},function(a,b){a?console.log("error loading model",a):(this.set("assetUrl",b.assetUrl),this.setAttrs(b))}.bind(this)),this._jobListener.detach())},this))},_updateNextDisplayIndex:function(){var a=0;this.get("items").each(function(b){b=b.get("displayIndex");b>=a&&(a=b+1)},this);this._set("nextDisplayIndex",a)},_saveFields:function(b,c){if(1<
b.length)throw Error("Saving multiple fields is not currently supported.");var d=b[0],d={field:d,itemId:this.get("id"),value:this.get(d)};h.update(d).then(function(b){a.Lang.isFunction(c)&&c(null,b.item)},function(b){a.Lang.isFunction(c)&&c.call(b,null)}).catch(this._errorHandler)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case e.AUDIO:return a.Squarespace.Models.Audio;case e.EVENT:return a.Squarespace.Models.CalendarEvent;case e.CHECKIN:return a.Squarespace.Models.CheckIn;
case e.VIDEO:return a.Squarespace.Models.Embed;case e.KBARTICLE:return a.Squarespace.Models.KBArticle;case e.LINK:return a.Squarespace.Models.Link;case e.QUOTE:return a.Squarespace.Models.Quote;case e.STORE_ITEM:return a.Squarespace.Models.StoreItem;case e.TWEET:return a.Squarespace.Models.Tweet;default:return null}}},{ATTRS:{id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var b=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);return b?
b.id:null}},proxyForId:{value:null},recordType:{validator:a.Squarespace.AttrValidators.isValueIn(e),writeOnce:!0},childType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},addedOn:{valueFn:function(){return(new Date).getTime()},validator:a.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},updatedOn:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber,writeOnce:"initOnly"},publishOn:{valueFn:function(){return(new Date).getTime()},validator:a.Squarespace.AttrValidators.isNumber},
unsaved:{value:null,validator:a.Squarespace.AttrValidators.isNullOrBoolean},urlId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},title:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},body:{value:null,setter:function(b){return a.merge(this.get("body"),b)},validator:a.Squarespace.AttrValidators.isNullOrObject},excerpt:{value:{html:"",raw:!1},validator:a.Squarespace.AttrValidators.isNullOrObject},displayIndex:{value:0,validator:a.Squarespace.AttrValidators.isNumber},
starred:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},passthrough:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},tags:{value:[],validator:a.Squarespace.AttrValidators.isArray},categories:{value:[],validator:a.Squarespace.AttrValidators.isArray},workflowState:{value:c.DRAFT,validator:a.Squarespace.AttrValidators.isValueIn(c)},systemDataId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},systemDataVariants:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
systemDataOrigin:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},contentType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},filename:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},dataSize:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},sourceUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},mediaProcessingState:{value:null,validator:a.Squarespace.AttrValidators.isNullOr(a.Squarespace.AttrValidators.isValueIn(d))},
mediaFocalPoint:{value:{x:0.5,y:0.5},setter:function(b){if(a.Lang.isString(b)){b=b.split(",");var c=parseFloat(b[0]);b=parseFloat(b[1]);return{x:!isNaN(c)&&1>=c?c:0.5,y:!isNaN(b)&&1>=b?b:0.5}}return b}},colorData:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},clickthroughUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},location:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},customContent:{value:null},likeCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},
dislikeCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},commentCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},publicCommentCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},commentState:{valueFn:function(){var a=q.getState().toJS(),b=a.commentsEnabled;return a.commentEnableByDefault&&b?g.ENABLED:g.DISABLED},validator:a.Squarespace.AttrValidators.isValueIn(g)},commentDisableOn:{valueFn:function(){var b=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings",
"commentDisableAfterDaysDefault"]);return b?a.Date.addDays(new Date,b).getTime():null},validator:a.Squarespace.AttrValidators.isNullOrNumber},pushedServices:{value:{},validator:a.Squarespace.AttrValidators.isObject},shareStates:{value:[]},structuredContent:{valueFn:function(){var b=this._getStructuredContentCtor();return a.Lang.isNull(b)?null:new b},setter:function(b){if(b instanceof a.Squarespace.Models.StructuredContent)return b;var c=this._getStructuredContentCtor();return a.Lang.isNull(c)?null:
new c(b)}},items:{valueFn:function(){return new a.Squarespace.Models.ContentItemList({parent:this})},setter:function(b){var c=this.get("items");return a.Lang.isValue(c)?(c.reset(b),c):b instanceof a.Squarespace.Models.ContentItemList?b:new a.Squarespace.Models.ContentItemList({items:b,parent:this})}},childrenGroups:{value:{},validator:a.Squarespace.AttrValidators.isObject},author:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},fullUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
assetUrl:{value:null,getter:function(b){return a.Squarespace.UrlUtils.isSecure()?a.Squarespace.UrlUtils.securifyURL(b):b},validator:a.Squarespace.AttrValidators.isNulLOrString},resolved:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},postItemInjectCode:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},promotedBlock:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},promotedBlockType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},nextDisplayIndex:{value:0,
validator:a.Squarespace.AttrValidators.isNumber,readOnly:!0},mediaIsUploading:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},hasFileData:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},isGlobalFakeContentItem:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},licensedAssetPreview:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},licensedAssetId:{value:null,validator:a.Lang.isString},isPusher:{value:!0,readOnly:!0,validator:a.Squarespace.AttrValidators.isBoolean},
dirty:{getter:function(){return r.getItemDirtyState(this.get("id"))}}}})},"1.0",{requires:"base json model squarespace-attr-validators squarespace-model-sync-rest squarespace-models-audio squarespace-models-calendar-event squarespace-models-check-in squarespace-models-content-collection squarespace-models-content-item-list squarespace-models-embed squarespace-models-instagram squarespace-models-kb-article squarespace-models-link squarespace-models-quote squarespace-models-store-item squarespace-models-tweet squarespace-url-utils squarespace-util".split(" ")})},
1169:function(k,f){YUI.add("squarespace-models-embed",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Embed=a.Base.create("Embed",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Embed",validator:function(a){return"Embed"===a},readOnly:!0},embed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},oembed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},overlay:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",
{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1170:function(k,f){YUI.add("squarespace-models-instagram",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Instagram=a.Base.create("Instagram",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Instagram",validator:function(a){return"Instagram"===a},readOnly:!0},instagramId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
imageLowResolutionUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},imageThumbnailUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},imageStandardUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},width:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},height:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},filter:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userProfilePictureUrl:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},userAccountName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userDisplayName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1171:function(k,f){YUI.add("squarespace-models-kb-article",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.KBArticle=a.Base.create("KBArticle",a.Squarespace.Models.StructuredContent,
[],{},{ATTRS:{_type:{value:"KBArticle",validator:function(a){return"KBArticle"===a},readOnly:!0},upVotes:{value:0,validator:a.Squarespace.AttrValidators.isNumber},downVotes:{value:0,validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1172:function(k,f){YUI.add("squarespace-models-link",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Link=a.Base.create("Link",a.Squarespace.Models.StructuredContent,
[],{},{ATTRS:{_type:{value:"Link",validator:function(a){return"Link"===a},readOnly:!0},url:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1174:function(k,f){YUI.add("squarespace-models-quote",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Quote=a.Base.create("Quote",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Quote",validator:function(a){return"Quote"===
a},readOnly:!0},quote:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1175:function(k,f,a){var g=a(136);YUI.add("squarespace-models-store-item",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.StoreItem=a.Base.create("StoreItem",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"StoreItem",validator:function(a){return"StoreItem"===a},readOnly:!0},
productType:{value:g.PHYSICAL,validator:a.Squarespace.AttrValidators.isValueIn(g)},priceCents:{value:0,validator:a.Squarespace.AttrValidators.isNumber},salePriceCents:{value:0,validator:a.Squarespace.AttrValidators.isNumber},onSale:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},variants:{value:[],validator:a.Squarespace.AttrValidators.isArray},originalVariants:{value:[],validator:a.Squarespace.AttrValidators.isArray},variantOptionOrdering:{value:[],validator:a.Squarespace.AttrValidators.isArray},
additionalFieldsFormId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},customAddButtonText:{value:"Add to Cart",validator:a.Squarespace.AttrValidators.isString},useCustomAddButtonText:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},additionalFieldsForm:{value:null}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1176:function(k,f){YUI.add("squarespace-models-structured-content",function(a){a.namespace("Squarespace.Models");
a.Squarespace.Models.StructuredContent=a.Base.create("StructuredContent",a.Model,[],{},{ATTRS:{_type:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},1177:function(k,f){YUI.add("squarespace-models-tweet",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Tweet=a.Base.create("Tweet",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Tweet",validator:function(a){return"Tweet"===
a},readOnly:!0},tweetId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},accountId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},displayName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},accountName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},tweet:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},profileImageUrl:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},profileImageUrlHttps:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userLocation:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},3439:function(k,f){YUI.add("squarespace-simple-liking",function(a){var f=a.config.win.Static;a.Squarespace.SimpleLike={TEXT_LIKE_VERB_NONE:"No Likes",TEXT_LIKE_VERB_SINGULAR:"Like",
TEXT_LIKE_VERB_PLURAL:"Likes",TEXT_LIKE_ACTIVATED:"You like this",TEXT_LIKE_SUGGEST:"Click to like",attached:!1,attach:function(){if(!this.attached){this.attached=!0;var d;try{localStorage&&((d=a.JSON.parse(localStorage.getItem("squarespace-likes")))||(d={}),localStorage.setItem("squarespace-likes",a.JSON.stringify(d)))}catch(e){d={}}this.eventHandlers=[];var c=a.delegate("click",function(b){b=b.currentTarget;var c=b.getAttribute("data-item-id");if(c){for(var e=0;5>e;++e)a.Squarespace.SimpleLike.burst(b);
if(!b.hasClass("clicked")&&!b.hasClass("float")){e=parseInt(b.getAttribute("data-like-count"),10);b.setAttribute("data-like-count",e+1);a.Squarespace.SimpleLike.renderLikeCount(b);b.addClass("clicked");try{localStorage&&(d[c]=!0,localStorage.setItem("squarespace-likes",a.JSON.stringify(d)))}catch(f){console.warn("Unable to save like to local storage: ",f)}(new a.Squarespace.Models.ContentItem({id:c})).like(function(b,c){c.commited&&console.log("Like was counted!");a.Lang.isValue(b)&&b.crumbFail&&
!a.Squarespace.Utils.areCookiesEnabled()&&alert("You need to enable cookies to be able to like something.")})}}},"body",".sqs-simple-like");this.eventHandlers.push(c);a.all(".sqs-simple-like").each(function(b){var c=b.getAttribute("data-item-id");c&&(f.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled||b.remove(),d[c]&&b.addClass("clicked"),a.Squarespace.SimpleLike.renderLikeCount(b))})}},detach:function(){this.attached=!1;this.eventHandlers.forEach(function(a){a.detach()})},renderLikeCount:function(d){var e=
d.getAttribute("data-item-id"),c=d.getAttribute("data-like-count");d=d.one(".like-count");e&&d&&(e="",e=0===c?a.Squarespace.SimpleLike.TEXT_LIKE_VERB_NONE:1==c?"1 "+a.Squarespace.SimpleLike.TEXT_LIKE_VERB_SINGULAR:c+" "+a.Squarespace.SimpleLike.TEXT_LIKE_VERB_PLURAL,d.setContent(e))},burst:function(d){var e=d.cloneNode(!0);e.one(".like-count")&&e.one(".like-count").remove();var c=d.one(".like-icon");if(!c||"none"===c.getStyle("display"))c=d;e.setStyles({position:"absolute",left:c.getX()+"px",top:c.getY()+
"px"});a.one(a.config.doc.body).append(e);d=new a.Anim({node:e,duration:2,easing:a.Easing.easeOut});d.set("to",{curve:a.Squarespace.SimpleLike.randomCurve(e)});d.on("end",function(){this.get("node").remove()});d.run();e.removeClass("clicked");e.addClass("float")},randomCurve:function(a){var e=[],c=Math.floor(2*Math.random())?1:-1,b=Math.floor(2*Math.random())?1:-1,f=a.getX();a=a.getY();for(var g=0;3>g;++g)f+=Math.floor(30*Math.random())*c,a+=Math.floor(30*Math.random())*b,e.push([f,a]);return e}};
a.config.win.Squarespace.onInitialize(a,function(){f.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled&&a.Squarespace.SimpleLike.attach()});a.config.win.Squarespace.onDestroy(a,function(){!0===a.Squarespace.SimpleLike.attached&&a.Squarespace.SimpleLike.detach()})},1,{requires:["anim","json","node","squarespace-models-content-item","squarespace-util"]})}});
