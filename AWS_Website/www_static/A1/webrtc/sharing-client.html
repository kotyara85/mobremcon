<html>
<head>
<script src="/A1/js/RTCMultiConnection.js"></script>
<script src="/socket.io/socket.io.js"></script>
<style>
audio {
	display: none;
}
video {
	display: block;
    width: 90%;
}
</style>
<script>
// DUPLICATE SOCKET
var socketWebrtc = io.connect(document.location.hostname + ':' + location.port);


socketWebrtc.on('sharing-client', function (data) {
	startSession(data.moderatorId);
	function startSession(moderatorId) {
		var MODERATOR_CHANNEL_ID = 'slite-screen'; // channel-id
		var MODERATOR_SESSION_ID = '<%= hash %>-screen';    // room-id
		var MODERATOR_ID         = '' + moderatorId + '';    // user-id
		var MODERATOR_SESSION    = {         // media-type
		};

		var MODERATOR_EXTRA      = {};       // empty extra-data

		var participants = new RTCMultiConnection(MODERATOR_CHANNEL_ID);
		participants.join({
						sessionid: MODERATOR_SESSION_ID,
						userid:    MODERATOR_ID,
						extra:     MODERATOR_EXTRA,
						session:   MODERATOR_SESSION
			});
	}

});

function start() {
	socketWebrtc.emit("sharing-server", {hash: '<%= hash %>'});
}

</script>
</head>
<body onload="start()">
</body>
</html>
