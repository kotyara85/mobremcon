<html>
<head>
<script src="https://cdn.webrtc-experiment.com/RTCMultiConnection.js"></script>
<script src="/socket.io/socket.io.js"></script>
<style>
video {
	display: block;
    width: 90%;
}
</style>
<script>
// DUPLICATE SOCKET
//var socket = io.connect(document.location.hostname + ':' + location.port);


socket.on('sharing-client', function (data) {
	startSession(data.moderatorId);
	function startSession(moderatorId) {
		var MODERATOR_CHANNEL_ID = 'slite-video'; // channel-id
		var MODERATOR_SESSION_ID = '<%= hash %>-video';    // room-id
		var MODERATOR_ID         = '' + moderatorId + '';    // user-id
		var MODERATOR_SESSION    = {         // media-type
			oneway: true
		};
		
		var MODERATOR_EXTRA      = {};       // empty extra-data

		var participants = new RTCMultiConnection(MODERATOR_CHANNEL_ID);
		participants.join({
			sessionid: MODERATOR_SESSION_ID,
			userid:    MODERATOR_ID,
			extra:     MODERATOR_EXTRA,
			session:   MODERATOR_SESSION
		});
	}

});

function start() {
	socket.emit("sharing-server", {hash: '<%= hash %>'});
}

</script>
</head>
<body onload="start()">
</body>
</html>