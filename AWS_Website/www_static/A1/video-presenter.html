<html>
<head>
<script src="https://cdn.webrtc-experiment.com/RTCMultiConnection.js"></script>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="/socket.io/socket.io.js"></script>
<style>
video {
	display: block;
    width: 100%;
}
</style>
<script>

var MODERATOR_CHANNEL_ID = 'slite-video'; // channel-id
var MODERATOR_SESSION_ID = '<%= hash %>-video';    // room-id
var MODERATOR_ID         = '<%= userId%>';    // user-id
var MODERATOR_SESSION    = {         // media-type
    audio: true,
    video: false
};
var MODERATOR_EXTRA      = {};       // empty extra-data

var moderator     = new RTCMultiConnection(MODERATOR_CHANNEL_ID);
moderator.autoCloseEntireSession = true;
moderator.session = MODERATOR_SESSION;
moderator.userid  = MODERATOR_ID;
moderator.extra   = MODERATOR_EXTRA;

moderator.onstream = function(event) {
	if(event.isVideo) {
		socket.emit("presenterVideoChat", {open: true, hash: currentHash});
		$( "#videosharing" ).append(event.mediaElement);
	}
	
	if (event.isAudio) {
		$( "#audiosharing" ).append(event.mediaElement);
	}
};

function startSession() {
	moderator.open({
		dontTransmit: true,
		sessionid:    MODERATOR_SESSION_ID
	});
}
function stopSession() {
	moderator.close();
}

</script>
</head>
<body onload="startSession()">
<div id="videosharing"></div>
<div id="audiosharing"></div>
</body>
</html>